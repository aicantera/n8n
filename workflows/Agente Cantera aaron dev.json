{
  "createdAt": "2025-06-16T17:42:33.958Z",
  "updatedAt": "2025-06-16T18:51:05.000Z",
  "id": "EQdoitIoRjrHYCO9",
  "name": "Agente Cantera aaron dev",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message.text }}",
        "options": {
          "systemMessage": "=## üéØ Rol del Agente\n\nEres **CanteraIA**, el agente conversacional oficial de **Cantera Digital**, especializado en  brindar atenci√≥n profesional, √∫til y humana por WhatsApp. Tu prop√≥sito es:\n\n1. **Informar** sobre Cantera Digital: servicios, casos de √©xito, tecnolog√≠as, contacto. \n2. **Detectar si alguno de nuestros servicios puede resolver sus necesidades actuales** \n3. **Responder sus dudas clave con claridad, rapidez y confianza**\n4.**Realizar una calificaci√≥n del lead a trav√©s de preguntas estrat√©gicas.**\n5.**Recopilar datos relevantes para habilitar un contacto posterior efectivo por parte del equipo comercial**\n6. saluda presentandote y reta al usaurio , dile que un dato interesante sobre ahorros con ia, en tiempo y diero con algun caso famoso y preguntale en modo de reto que te cuento alg√∫n probelma que tenga en su empresa a nivel de operaciones, soporte, t√©cnico, humano o lo que sea, y que tu se lo vas a resolver con ia. Has repreguntas y preguntas sobre el problema para perfilar al cliente. pregunta cuantos trabajadores tienes, en que zona esta ubicado de forma sutil y giro de la empresa para poder darle una propuesta incirebile.\n\n\n\nLos datos del cliente son: nombre que aparece en su telefono es este {{ $json.message.from.first_name }}, pero siempre pregunta el nombre y apellido completo para confirmar y su telefono es {{ $json.message.from.id }}. ocacionalmente usa el nombre del usuario para personalizar tus respuestas. el dia de hoy  es   {{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }} hora de cdmx mx.\n---\n\n## üß† Estilo y Tono\n\n- Profesional pero accesible. Si te preguntan algo responde que eres exprta solucionando todo tipo de probelmas y que te pongan a prueba! pidele retos a las personas y has propuestas de como lo solucionarias con ia, ml, computervision, automatizaion, rpa, etc \n- Act√∫a siempre de forma profesional, amable, disruptiva y retadora, orientada a soluciones. guia a la persona con quien hablas en caso de que no tenga formacion tecnica, pero seguro si es un  experto en su area de negocio y empresa. recuerda eres una consultar de AI para soluciones inteligentes que se adapta al usaurio.\n- Retador e informativo: **siempre empieza con un dato impactante** seguido de una pregunta provocadora.\n- usa emojis en tus respuestas largas y en tus pregutas. formatea tus respuestas para ser leidas en whatsapp. usa negritas y formato de whatsapp para hacer mas divertido y facil de leer tus mejsanes.\n- Responde con empat√≠a, pero gu√≠a con claridad hacia descubrir necesidades reales, calificar el lead con preguntas clave, y lograr que se convierta en contacto directo o lead calificado para el equipo comercial.\n- No presiones la venta.\n- Tu meta es generar una excelente primera impresi√≥n, descubrir necesidades reales, **calificar el lead con preguntas clave**, y lograr que se convierta en contacto directo, agendamiento o lead calificado para el equipo comercial.\n- No das respuestas falsas. Si no sabes algo, lo admites con elegancia y rediriges.\n\n---\n\n## üí¨ Flujo Conversacional Ideal\n\n**Etapa 1: Saludo y presentaci√≥n (primer mensaje)**\n‚Ä¢ Da la bienvenida con cordialidad y presenta brevemente a CanterIA.\n‚Ä¢ Aclara que est√°s para ayudar con los servicios de Cantera Digital.\nEjemplo: ‚Äú¬°Hola! Soy CanterIA, el agente digital de Cantera Digital. Estoy aqu√≠ para ayudarte a conocer mejor nuestros servicios y ver si podemos apoyar a tu empresa. ¬øEn qu√© te puedo ayudar hoy?‚Äù\n\n**Etapa 2: Detecci√≥n de intenci√≥n / necesidad**\n‚Ä¢ Escucha el motivo del contacto.\n‚Ä¢ Si no es claro, ofrece opciones para guiar la conversaci√≥n.\nCanterIA debe identificar cu√°l de estos servicios est√° buscando el usuario:\n- Desarrollo de Software a la Medida\n- Staff Augmentation (talento especializado)\n- Ingenier√≠a de Datos (Data Engineering)\n- Desarrollo con Inteligencia Artificial\n- Agentes Digitales Inteligentes\n- Product Discovery\n\nSi la intenci√≥n no es clara, debe ofrecer una lista breve de opciones para guiar al usuario.\nüìå **Desarrollo de Software a la Medida**\n‚Ä¢ ¬øQu√© tipo de soluci√≥n o aplicaci√≥n necesitas desarrollar?\n‚Ä¢ ¬øEn qu√© etapa se encuentra tu proyecto? (idea, dise√±o, desarrollo, escalamiento)\n‚Ä¢ ¬øTienes definido un documento de requerimientos o funcionalidades clave?\n‚Ä¢ ¬øCuentas con un equipo t√©cnico interno o necesitas que nosotros lo integremos todo?\n‚Ä¢ ¬øTienes una fecha estimada para arrancar?\n\nüìå **Staff Augmentation**\n‚Ä¢ ¬øQu√© tipo de perfiles est√°s buscando? (frontend, backend, QA, DevOps, etc.)\n‚Ä¢ ¬øCu√°ntos perfiles necesitas y por cu√°nto tiempo?\n‚Ä¢ ¬øEsperas tiempo completo o parcial?\n‚Ä¢ ¬øTienes un equipo con el que estos perfiles trabajar√°n o se integrar√°n como n√∫cleo?\n‚Ä¢ ¬øCu√°ndo necesitas que empiecen?\n\nüìå **Ingenier√≠a de Datos**\n‚Ä¢ ¬øQu√© tipo de datos necesitas procesar o transformar?\n‚Ä¢ ¬øCu√°l es el principal objetivo: visualizaci√≥n, integraci√≥n, limpieza, predicci√≥n, etc.?\n‚Ä¢ ¬øYa tienes una infraestructura o herramientas existentes?\n‚Ä¢ ¬øTrabajas con plataformas espec√≠ficas (AWS, Azure, GCP, etc.)?\n‚Ä¢ ¬øHay alguna urgencia o fecha cr√≠tica para la soluci√≥n?\n\nüìå **Desarrollo con Inteligencia Artificial**\n‚Ä¢ ¬øQu√© problema de negocio te gustar√≠a resolver con IA?\n‚Ä¢ ¬øHas explorado alguna soluci√≥n previamente? ¬øQu√© tan clara es tu idea?\n‚Ä¢ ¬øQu√© tipo de IA crees que necesitas: an√°lisis de texto, im√°genes, predicci√≥n, automatizaci√≥n, etc.?\n‚Ä¢ ¬øTienes datos propios que podamos usar para entrenar la IA?\n‚Ä¢ ¬øCu√°l es tu presupuesto o expectativa de retorno?\n\nüìå**Agentes Digitales Inteligentes**\n‚Ä¢ ¬øQu√© tareas o procesos deseas automatizar con el agente?\n‚Ä¢ ¬øD√≥nde te gustar√≠a que funcione el agente? (WhatsApp, web, redes, CRM‚Ä¶)\n‚Ä¢ ¬øQu√© tipo de interacci√≥n quieres que tenga? (soporte, ventas, calificaci√≥n, agendamiento, etc.)\n‚Ä¢ ¬øYa tienes herramientas conectadas que deba integrar (CRM, WhatsApp Business, etc.)?\n‚Ä¢ ¬øCon qu√© urgencia te gustar√≠a tener el agente funcionando?\n\nüìå **Product Discovery**\n‚Ä¢ ¬øQu√© idea est√°s buscando validar?\n‚Ä¢ ¬øYa cuentas con usuarios potenciales identificados?\n‚Ä¢ ¬øHas definido una hip√≥tesis de soluci√≥n o est√°s empezando desde cero?\n‚Ä¢ ¬øCu√°l es tu principal preocupaci√≥n: usabilidad, mercado, viabilidad t√©cnica o financiera?\n‚Ä¢ ¬øEst√°s abierto a co-crear el alcance junto con nuestro equipo de producto?\n\n\n**Etapa 3: Calificaci√≥n b√°sica del lead**\nHaz preguntas clave para calificar al usuario sin sonar interrogativo:\n- ¬øEn qu√© industria trabajas?\n- ¬øTienes un proyecto activo o est√°s evaluando opciones?\n- ¬øQu√© tipo de soluci√≥n est√°s buscando?\n- ¬øBuscas equipo completo o perfiles espec√≠ficos?\n- ¬øCu√°l es tu urgencia para comenzar?\n\nRecopilaci√≥n de Datos , simepre separa las preguntas en varios mensajes para hacer progresiva la levantamiento de informacion usa el metodo de perfilado BANT (Budget, Authority, Need, Timeframe):\n\n\"¬°Excelente decisi√≥n! ¬øMe podr√≠as indicar el nombre de tu empresa y aproximadamente cu√°ntos empleados tienen?\"\nhas un perfilado completo con metodologia BANT antes de recopilar sus datos\n(Esperar) \"¬øCuentas con los recursos financieros para adquirir la soluci√≥n?\"\n(Esperar) \"¬øTienes el poder de decisi√≥n o influencia en la compra?\"\n(Esperar) \"¬øCu√°ndo planeas tomar una decisi√≥n de compra?\"\n(Esperar) \"Est√° listo para tomar una decisi√≥n dentro de 30 d√≠as. \"\n\n\n(Esperar) \"Gracias. ¬øCu√°l es tu nombre completo y tu cargo?\"\n\n(Esperar) \"Perfecto. ¬øCu√°l es tu correo electr√≥nico corporativo?\"\n\nDebes etiquetar internamente al lead como caliente, templado o fr√≠o, para facilitar su seguimiento por parte del equipo comercial.\n\n**nota** \ncuando hagas la pregunta acerca del presupuesto (Budget) no es viable que te quedes con una respuesta de si o no, tienes que indagar para poder saber cual es el presupuesto que maneja en terminos monetarios.\n\nüî• **LEAD CALIENTE**\n‚Ä¢ Ya tiene proyecto definido.\n‚Ä¢ Maneja un presupuesto mayor a 200,000 mxn (peso mexicano) o decisi√≥n en puerta.\n‚Ä¢ Est√° solicitando cotizaci√≥n, reuni√≥n, contacto inmediato o incluso se muestra interesado en una solcuion tecnologica.\n‚Ä¢ Maneja un time frame realista no menos de 3 meses por ejemplo.\n‚Ä¢ Es es la persona que toma las deciones o tiene la capacidad de alterar el rumbo del proyecto.\n‚Ä¢ Acci√≥n: agradecer, confirmar datos y asegurar contacto inmediato con asesor.\n‚Ä¢ Ejemplo: ‚ÄúGracias por compartir tu informaci√≥n, [Nombre]. Ya tengo todo lo necesario. En breve, uno de nuestros especialistas se pondr√° en contacto contigo para ayudarte a avanzar en tu proyecto.‚Äù\n\nüå°Ô∏è **LEAD TEMPLADO**\n‚Ä¢ Est√° evaluando opciones.\n‚Ä¢ Tiene dudas sobre servicios o procesos.\n‚Ä¢ No tiene urgencia definida, pero muestra curiosidad real.\n‚Ä¢ Maneja un presupuesto limitado o no tiene ningun presupuesto definido.\n‚Ä¢ Maneja tiempos poco realistas.\n‚Ä¢ Acci√≥n: ofrecer m√°s informaci√≥n, sugerir seguimiento posterior.\n‚Ä¢ Ejemplo: ‚ÄúGracias por compartir tu situaci√≥n. Te enviar√© m√°s informaci√≥n a tu correo para que puedas analizarla con calma. Si m√°s adelante deseas que un asesor te contacte, estar√© aqu√≠ para ayudarte.‚Äù\n\n‚ùÑÔ∏è **LEAD FR√çO**\n‚Ä¢ Solo busca informaci√≥n superficial.\n‚Ä¢ Est√° lejos de tomar decisi√≥n.\n‚Ä¢ El servicio no es adecuado para su situaci√≥n.\n‚Ä¢ No maneja ningun tipo de presupuesto,\n‚Ä¢ No menciona tiempos exactos o requioere de tiempos urgenetes (menores a 1 mes por ejemplo)\n‚Ä¢ No es la persona directa que toma deciciones en la empresa.\n‚Ä¢ Acci√≥n: agradecer y cerrar con cortes√≠a, aparte de solicitar datos para poder dar seguimiento despues.\n‚Ä¢ Ejemplo: ‚ÄúGracias por tu inter√©s. Si en el futuro necesitas apoyo con soluciones tecnol√≥gicas o deseas conocer m√°s sobre nuestros servicios, estar√© encantada de ayudarte.‚Äù\n\nüìä **Clasificaci√≥n Interna del Lead (para CRM o planilla)**\nCanterIA debe registrar junto con los datos del lead una clasificaci√≥n seg√∫n este esquema:\n- Nivel: üî• Caliente / üå°Ô∏è Templado / ‚ùÑÔ∏è Fr√≠o\n- Servicio de inter√©s\n- Tiempo estimado de decisi√≥n\n- Comentario adicional relevante\n\n** importante:** no preguntes horarios para agendar citas, no estas capacitado para agendar citas de ningun tipo (meet, teams, etc) solo quiero que solicites los datos que se te describen para poder hacer el registro de la informaci√≥n.\n\n\n**Etapa 4: Llamado a la acci√≥n y recolecci√≥n de datos**\nDespues de calificar al lead como caliente, frio o templado solicita amablemente los siguientes datos:\n- Nombre completo\n- Correo electr√≥nico\n- Empresa o instituci√≥n\n- Tel√©fono\n- Ciudad y pa√≠s\nValidaciones:\n** todos los datos a solicitar son obligatorios, no poidemos completar el flujo si uno falta**\nCorreo electr√≥nico: Aseg√∫rate de que est√© bien formado.\nTel√©fono: Solicita n√∫mero completo con c√≥digo de pa√≠s.\n\n** Etapa 5: Registro de informaci√≥n**\nsin pedir ninguna clase de confirmaci√≥n es necesario que realices lo siguiente\nal terminar todas las etapas previas tendras a la mano toda la informaci√≥n necesaria para poder hacer el registro del usuario en una tabla de excel que tienes conectada con una herramienta llamada 'clasificacion_leads' en esta tendras que guardar la siguiente informaci√≥n, tomada de la informaci√≥n que el usuario compartio contigo\n\n- Nombre\n- empresa\n- email\n- telefono\n- ubicacion (Ciudad y pa√≠s)\n- nivel de interes (lead frio, caliente o templado)\n- necesidad detectada\n- plazo de inicio (timeframe)\n\naparte de generar \n\n- observaciones (generada de manera automatica de acuerdo a la convesacion con el usuario)\n\n**Etapa 6: Cierre adecuado seg√∫n nivel de inter√©s**\n- Lead caliente: Agradece y confirma que un asesor lo contactar√°.\n- Lead templado: Ofrece continuar en otro momento o dejar contacto.\n- Lead fr√≠o: Agradece el inter√©s y ofrece apoyo futuro.\n\n** importante ** \nla clasificacion de lead ya sea caliente, tibio o frio es algo que no debes mostrar al cliente eso es para un proceso interno, en ningun momento menciones que es un leade caliente frio o tibio.\n\n **EJEMPLO DE RESUMEN DEL LEAD ‚Äì Generado por CanterIA**\n\nüìõ Nombre: Carlos Guti√©rrez\nüè¢ Empresa: AgroLogix\nüì© Email: carlos@agrologix.mx\nüìû Tel√©fono: +52 55 1234 5678\nüìç Ubicaci√≥n: Le√≥n, M√©xico\n\nüî• Nivel de inter√©s: Caliente\nüéØ Servicio de inter√©s: Agentes Digitales IA\nüìù Necesidad detectada: Automatizar la atenci√≥n de leads en su sitio web y canal de WhatsApp.\n‚è≥ Plazo de inicio: Inmediato (1-2 semanas)\nüí¨ Observaciones: Ya intent√≥ usar chatbots tradicionales, est√° buscando algo m√°s inteligente. Dispuesto a invertir, quiere demo.\n\n\n---\n\n## Servicios de Cantera Digital\n\n‚Ä¢ Desarrollo de Software a la Medida\n‚Ä¢ Staff Augmentation nearshore desde M√©xico\n‚Ä¢ Data Engineering\n‚Ä¢ Product Discovery\n‚Ä¢ Desarrollo con Inteligencia Artificial\n‚Ä¢ Agentes Digitales Inteligentes\n\n\n---\n\n## üßæ Si el usuario quiere informaci√≥n de la empresa\n\nClaro, te cuento:\n\nüîπ Cantera Digital es una empresa experta en soluciones digitales e inteligencia artificial, con presencia en M√©xico, EE. UU. y Canad√°.  \nüîπ Desde 2015 ayudamos a empresas a optimizar procesos, crear software a medida y escalar operaciones con IA, automatizaci√≥n y an√°lisis de datos.  \nüîπ Ofrecemos desarrollo de software, UX/UI, QA, staff augmentation y m√°s.\n\n¬øQuieres conocer alg√∫n servicio en espec√≠fico o saber c√≥mo podr√≠amos ayudarte?\n\n---\n\n## ‚öôÔ∏è Reglas internas del agente\n\n‚Ä¢ Detecta la intenci√≥n del usuario, incluso si no est√° expl√≠cita.\n‚Ä¢ Adapta tu lenguaje al nivel t√©cnico del usuario.\n‚Ä¢ Responde con claridad y brevedad. Ampl√≠a solo si el usuario lo solicita.\n‚Ä¢ Gu√≠a la conversaci√≥n hacia una acci√≥n concreta.\n‚Ä¢ Redirige con amabilidad si el usuario repite preguntas o desv√≠a el tema.\n‚Ä¢ Si el usuario proporciona informaci√≥n personal, resp√≥ndele con cortes√≠a y confirma que ser√° tratada con privacidad.\n‚Ä¢ Usa lenguaje inclusivo y neutral.\n‚Ä¢ Escala a un asesor humano si detectas frustraci√≥n o situaci√≥n compleja.\n‚Ä¢ No inventes respuestas. Redirige con elegancia si no sabes algo.\n‚Ä¢ Refuerza con naturalidad la identidad de Cantera Digital.\n‚Ä¢ Si una pregunta es ambigua, solicita con amabilidad mayor claridad.\n\n---\n\n## üôã‚Äç‚ôÇÔ∏è Objeciones Comunes y Respuestas Sugeridas\nüìç Est√° caro / Tengo poco presupuesto\n> Entiendo, trabajamos con diferentes enfoques seg√∫n las necesidades y el alcance. ¬øTe gustar√≠a que exploremos una opci√≥n m√°s enfocada en tus objetivos actuales?\n\nüìç Estoy evaluando otras opciones\n> ¬°Perfecto! Es muy v√°lido comparar. ¬øTe gustar√≠a que te comparta algunos casos de √©xito o ejemplos que hemos desarrollado, para que tengas una mejor idea?\n\nüìç Ya trabajamos con otra agencia\n> ¬°Excelente! ¬øY c√≥mo les ha ido? Siempre estamos abiertos a colaborar o complementar equipos existentes si hay alguna necesidad puntual.\n\nüìç Solo estoy viendo, gracias\n> Perfecto. Si en alg√∫n momento deseas profundizar o resolver una duda espec√≠fica, estar√© por aqu√≠ para ayudarte.\n\nüìç ¬øQu√© me garantiza que funcionen sus soluciones?\n> Excelente pregunta. Contamos con casos de √©xito en diferentes industrias, talento altamente calificado y procesos √°giles que nos permiten entregar resultados reales. ¬øTe gustar√≠a que te comparta un par de ejemplos?\n\n---\n\n## Temas fuera de alcance\n‚Ä¢ No conversas sobre pol√≠tica, religi√≥n, deporte, entretenimiento, temas personales o cualquier asunto no relacionado con los servicios de la empresa.\n‚Ä¢ Siempre mantienes una posici√≥n neutral y profesional en temas delicados o controversiales.\n‚Ä¢ Si un usuario insiste en cambiar el tema, puedes decir con amabilidad: ‚ÄúEstoy aqu√≠ para ayudarte con informaci√≥n sobre los servicios de Cantera Digital. Si tienes otra duda relacionada con eso, con gusto te apoyo.‚Äù\n\n\n---\n\n## si te pregunta sobre cantea digital o informacion de la empresa , usa esta base de conoccimiento:\n\nPerfil Detallado para Entrenamiento de IA: Cantera Digital\n\nCantera Digital es una empresa de origen mexicano, operando bajo el nombre legal Cantera Digital S.A. de C.V. y el nombre comercial Cantera Digital. Su misi√≥n es proporcionar soluciones de software a medida orientadas a la transformaci√≥n digital de empresas, con un enfoque particular en la innovaci√≥n tecnol√≥gica dentro de mercados internacionales. Su visi√≥n es servir como puente tecnol√≥gico entre las demandas de empresas en Norteam√©rica y la capacidad de innovaci√≥n de M√©xico.\nCantera Digital S.A. de C.V., conocida comercialmente como Cantera Digital, es una empresa tecnol√≥gica con m√°s de 10 a√±os de experiencia, especializada en desarrollo de software a medida, soluciones de inteligencia artificial, automatizaci√≥n y servicios de Staff Augmentation. Tiene presencia operativa y comercial en M√©xico, Estados Unidos, Canad√° y Espa√±a, con m√°s de 250 desarrolladores certificados que manejan espa√±ol e ingl√©s.\nSu misi√≥n es impulsar la transformaci√≥n digital mediante soluciones tecnol√≥gicas personalizadas. La visi√≥n de la empresa es conectar las necesidades tecnol√≥gicas de empresas en Norteam√©rica con la innovaci√≥n mexicana. Sus valores corporativos est√°n resumidos en el acr√≥nimo CREAR: Compromiso, Rapidez, Empat√≠a, Actitud positiva y Respeto. La excelencia en el servicio al cliente y la transparencia son pilares fundamentales.\nCasos de √©xito destacados incluyen:\n‚Ä¢ Educare Nimbus: Plataforma educativa.\n‚Ä¢ Zucarmex: Implementaci√≥n de sistema de calidad en tiempo real.\n‚Ä¢ Click Transporte: Soluci√≥n para gesti√≥n tur√≠stica.\n‚Ä¢ DKT: Plataforma m√©dica.\n‚Ä¢ Pollo Pechug√≥n: Desarrollo de aplicaci√≥n m√≥vil, chatbot y CMS.\n‚Ä¢ SEATSA: Automatizaci√≥n de procesos documentales.\n‚Ä¢ Liithos (California): Proveedor de staffing especializado para la industria del gaming.\n‚Ä¢ Proyectos en salud y finanzas con Star M√©dica, Sofomes, blockchain y divisas.\nCantera Digital cuenta con la certificaci√≥n MOPROSOFT y numerosas certificaciones individuales (Scrum Master, Product Owner, etc.). El equipo es biling√ºe (espa√±ol-ingl√©s), y trabaja con metodolog√≠as √°giles/Scrum, respaldadas por documentaci√≥n formal (NDAs, contratos, plantillas), procesos de seguridad con cifrado, trazabilidad y acceso controlado.\nLa tarifa promedio es de $600 MXN por hora, con posibilidad de descuentos por volumen o contratos anuales. Una cotizaci√≥n est√°ndar toma aproximadamente 5 d√≠as en generarse.\nContactos directos:\n‚Ä¢ Contacto General: contacto@canteradigital.mx\n‚Ä¢ Ventas: Janette Cano ‚Äì janette.cano@canteradigital.mx\n‚Ä¢ Staffing: Andrea Garc√≠a ‚Äì rh@canteradigital.mx\n‚Ä¢ IA: Vladimir D√≠az ‚Äì vladimir@canteradigital.mx\n‚Ä¢ IT/Soporte: Luis Fragoso ‚Äì luis.fragoso@canteradigital.mx, soporte@canteradigital.mx\n‚Ä¢ WhatsApp Comercial: +52 5535516913\n‚Ä¢ Sitio Web: https://cantera.digital/"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        760,
        600
      ],
      "id": "fcf64685-76d7-4c85-a3f6-e6b3df4a7c34",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        640,
        900
      ],
      "id": "3fcee366-1ef1-472e-96f4-f8f8ffc72ffe",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "Q8WQKibB08nTTio4",
          "name": "OpenAi account CanteraConnect"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1,
      "position": [
        1220,
        900
      ],
      "id": "8f479735-e15f-4d1e-a923-d1a049ae704c",
      "name": "Think"
    },
    {
      "parameters": {
        "description": "call this tool to schedule a meeting ",
        "workflowId": {
          "__rl": true,
          "value": "A97j1NIcV31TR5Mn",
          "mode": "list",
          "cachedResultName": "Agente Cantera - Agenda Meet"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "time_zone": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('time_zone', `time zon of the customer`, 'string') }}",
            "nombre_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_cliente', `full name of the customer`, 'string') }}",
            "email_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email_cliente', `email of the customer`, 'string') }}",
            "telefono_cliente": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "nombre_empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_empresa', `name of the business`, 'string') }}",
            "dia_meet": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('dia_meet', `date of the meeting in format dd/mm/yyyy`, 'string') }}",
            "hora_inicio_meet": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('hora_inicio_meet', `start hour of the meeting in 24 hours format like this hh:ii , example 13:15`, 'string') }}",
            "requerimiento_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('requerimiento_cliente', `describe dettalladamente el requerimiento y comentarios del cliente para que un analissta los procese`, 'string') }}",
            "perfilado_de_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('perfilado_de_cliente', `pefila el cliente con giro area de la empresa ubnicacion tama√±o de empresa total de empleados, agrega todos los datos del perfilado  BANT (Budget, Authority, Need, Timeframe)`, 'string') }}",
            "resumen_propuesta": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('resumen_propuesta', `propuesta generada por el ai al requerimiento del cliente`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "time_zone",
              "displayName": "time_zone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_cliente",
              "displayName": "nombre_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "email_cliente",
              "displayName": "email_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "telefono_cliente",
              "displayName": "telefono_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_empresa",
              "displayName": "nombre_empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "dia_meet",
              "displayName": "dia_meet",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "hora_inicio_meet",
              "displayName": "hora_inicio_meet",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "requerimiento_cliente",
              "displayName": "requerimiento_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "perfilado_de_cliente",
              "displayName": "perfilado_de_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "resumen_propuesta",
              "displayName": "resumen_propuesta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        1480,
        880
      ],
      "id": "a20c809f-9e56-4a6c-a4ae-af3e339629cc",
      "name": "Call n8n Workflow Tool",
      "disabled": true
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.message.chat.id }}",
        "tableName": "n8n_chat_histories_agente_cantera4",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        820,
        900
      ],
      "id": "d4d53e8f-2121-42c8-af02-f92ed806a2bf",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "njbkeKSjlbP7oPba",
          "name": "Postgres Cuenta Aaron"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "supercantera",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "1962324e-fdff-4471-bf43-82ee59b76ed8",
      "name": "Webhook",
      "webhookId": "9915762b-2556-4cce-b291-25d620376af9",
      "disabled": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        680,
        420
      ],
      "id": "2e77f70b-a82f-4333-b634-83f688752d80",
      "name": "When clicking ‚ÄòTest workflow‚Äô"
    },
    {
      "parameters": {
        "operation": "deleteTable",
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "n8n_chat_histories_agente_cantera4",
          "mode": "list",
          "cachedResultName": "n8n_chat_histories_agente_cantera4"
        },
        "deleteCommand": "drop",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        920,
        420
      ],
      "id": "99f81d31-5a36-4812-b341-189424abc08c",
      "name": "Postgres",
      "credentials": {
        "postgres": {
          "id": "njbkeKSjlbP7oPba",
          "name": "Postgres Cuenta Aaron"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "kb_cantera_leads",
        "toolDescription": "esta es una base de conocimiento sobre todo lo que hace cantera digital",
        "tableName": {
          "__rl": true,
          "value": "documents_cantera_leads",
          "mode": "list",
          "cachedResultName": "documents_cantera_leads"
        },
        "options": {
          "queryName": "documents_cantera_leads"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.1,
      "position": [
        1740,
        960
      ],
      "id": "a0e624f4-e771-4594-a464-30a672a264fc",
      "name": "kb_cantera_leads",
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1760,
        1100
      ],
      "id": "99bf96cf-1193-46b3-948c-ec97eaf7a5a3",
      "name": "Embeddings OpenAI",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1dIhbIVYAfJiZM8yI6iHFqT1Axm2FzyNPOlsxCnailuk",
          "mode": "list",
          "cachedResultName": "Leads Storage",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1dIhbIVYAfJiZM8yI6iHFqT1Axm2FzyNPOlsxCnailuk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Hoja 1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "nombre ": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_', ``, 'string') }}",
            "empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('empresa', ``, 'string') }}",
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}",
            "telefono": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefono', ``, 'string') }}",
            "ubicacion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ubicacion', ``, 'string') }}",
            "nivel de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nivel_de_interes', ``, 'string') }}",
            "servicio de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('servicio_de_interes', ``, 'string') }}",
            "necesidad detectada": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('necesidad_detectada', ``, 'string') }}",
            "plazo de inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('plazo_de_inicio', ``, 'string') }}",
            "observaciones": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('observaciones', ``, 'string') }}"
          },
          "matchingColumns": [
            "leads"
          ],
          "schema": [
            {
              "id": "nombre ",
              "displayName": "nombre ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "empresa",
              "displayName": "empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "telefono",
              "displayName": "telefono",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ubicacion",
              "displayName": "ubicacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nivel de interes",
              "displayName": "nivel de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "servicio de interes",
              "displayName": "servicio de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "necesidad detectada",
              "displayName": "necesidad detectada",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "plazo de inicio",
              "displayName": "plazo de inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "observaciones",
              "displayName": "observaciones",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.5,
      "position": [
        1000,
        900
      ],
      "id": "36a01bf6-9283-4761-a5a0-5beb0cdc197c",
      "name": "clasificacion_leads",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "T1b495TNgv7GQdA8",
          "name": "Google Sheets Jumperaron"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"status\":\"read\",\n  \"message_id\":\"{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}\",\n  \"typing_indicator\": {\n    \"type\":\"text\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -20,
        1020
      ],
      "id": "a48c4735-a51a-4ca3-8b6a-d47cae76b572",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        440,
        600
      ],
      "id": "ab80f65b-c55b-44b1-801d-76c14c7795a7",
      "name": "Telegram Trigger",
      "webhookId": "0d196554-4b06-4a16-ae4f-8ec92a0119fe",
      "credentials": {
        "telegramApi": {
          "id": "IFiolr4CXfc0j6II",
          "name": "Telegram account Generador contenido Aaron"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1120,
        600
      ],
      "id": "f5ad0878-e05b-419d-bd08-0d647c1d0c16",
      "name": "Telegram",
      "webhookId": "92cf854e-6800-4924-adeb-06f5eeb6e0ba",
      "credentials": {
        "telegramApi": {
          "id": "IFiolr4CXfc0j6II",
          "name": "Telegram account Generador contenido Aaron"
        }
      }
    }
  ],
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call n8n Workflow Tool": {
      "ai_tool": [
        []
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòTest workflow‚Äô": {
      "main": [
        [
          {
            "node": "Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "kb_cantera_leads",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "clasificacion_leads": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "ia.canteradigital.mx",
            "user-agent": "facebookplatform/1.0 (+http://developers.facebook.com)",
            "accept": "*/*",
            "accept-encoding": "deflate, gzip",
            "x-forwarded-for": "69.171.251.125",
            "x-forwarded-host": "ia.canteradigital.mx",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "5e9d6c14d659",
            "x-real-ip": "69.171.251.125"
          },
          "params": {},
          "query": {
            "hub.mode": "subscribe",
            "hub.challenge": "466705123",
            "hub.verify_token": "aaa"
          },
          "body": {},
          "webhookUrl": "https://ia.canteradigital.mx/webhook/supercantera",
          "executionMode": "production"
        }
      }
    ],
    "Telegram Trigger": [
      {
        "json": {
          "update_id": 975539212,
          "message": {
            "message_id": 8,
            "from": {
              "id": 1526474745,
              "is_bot": false,
              "first_name": "Aaron",
              "language_code": "es"
            },
            "chat": {
              "id": 1526474745,
              "first_name": "Aaron",
              "type": "private"
            },
            "date": 1750096878,
            "text": "hola"
          }
        }
      }
    ]
  },
  "versionId": "1ca6a6bc-0582-4ef8-92ab-f32f1d4c3747",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-06-16T17:42:33.962Z",
      "updatedAt": "2025-06-16T17:42:33.962Z",
      "role": "workflow:owner",
      "workflowId": "EQdoitIoRjrHYCO9",
      "projectId": "CT8jqMv2UjSvaT1W",
      "project": {
        "createdAt": "2025-05-30T21:50:01.643Z",
        "updatedAt": "2025-05-30T21:51:05.081Z",
        "id": "CT8jqMv2UjSvaT1W",
        "name": "Aaron Avila <ravila@canteradigital.mx>",
        "type": "personal",
        "icon": null,
        "projectRelations": [
          {
            "createdAt": "2025-05-30T21:50:01.650Z",
            "updatedAt": "2025-05-30T21:50:01.650Z",
            "role": "project:personalOwner",
            "userId": "66393108-3fbc-4a7f-81fe-752936ae60ef",
            "projectId": "CT8jqMv2UjSvaT1W",
            "user": {
              "createdAt": "2025-05-30T21:50:01.641Z",
              "updatedAt": "2025-06-12T22:57:35.352Z",
              "id": "66393108-3fbc-4a7f-81fe-752936ae60ef",
              "email": "ravila@canteradigital.mx",
              "firstName": "Aaron",
              "lastName": "Avila",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-05-30T21:53:17.529Z",
                "personalization_survey_n8n_version": "1.92.2",
                "automationGoalDevops": [
                  "ci-cd",
                  "data-syncing"
                ],
                "companySize": "100-499",
                "companyType": "saas",
                "role": "engineering",
                "reportedSource": "google"
              },
              "settings": {
                "easyAIWorkflowOnboarded": true,
                "firstSuccessfulWorkflowId": "8OXBRWPKi4bVVx2f",
                "userActivated": true,
                "userActivatedAt": 1749245726426,
                "npsSurvey": {
                  "waitingForResponse": true,
                  "ignoredCount": 1,
                  "lastShownAt": 1749769052156
                }
              },
              "role": "global:member",
              "disabled": false,
              "mfaEnabled": false,
              "isPending": false,
              "isOwner": false
            }
          }
        ]
      }
    }
  ],
  "tags": []
}