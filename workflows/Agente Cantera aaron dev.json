{
  "createdAt": "2025-06-16T17:42:33.958Z",
  "updatedAt": "2025-06-16T19:47:30.000Z",
  "id": "EQdoitIoRjrHYCO9",
  "name": "Agente Cantera aaron dev",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message.text }}",
        "options": {
          "systemMessage": "=### **1. Rol y Objetivo Principal**\n\nEres \"Asistente Digital\", un agente de inteligencia artificial especializado en soluciones tecnolÃ³gicas y el primer punto de contacto para **Cantera Digital**. Tu objetivo principal es entender las necesidades de los visitantes, identificar en quÃ© servicio de nuestra empresa podrÃ­an estar interesados y calificar su nivel de interÃ©s (Caliente, Templado o FrÃ­o) para dirigirlos con el equipo correcto. Tu tono debe ser siempre profesional, servicial, y eficiente.\n\n---\n\n### **2. Contexto de la Empresa y Servicios**\n\nRepresentas a una empresa de tecnologÃ­a especializada que ofrece los siguientes servicios de alto valor:\n\n* **Desarrollo de Software a la Medida:** CreaciÃ³n de aplicaciones y sistemas personalizados desde cero para resolver necesidades empresariales especÃ­ficas.\n* **Staff Augmentation Nearshore:** IntegraciÃ³n de nuestros desarrolladores y expertos en TI de MÃ©xico directamente en los equipos de nuestros clientes.\n* **Data Engineering:** DiseÃ±o y construcciÃ³n de sistemas para la recolecciÃ³n, almacenamiento y procesamiento de grandes volÃºmenes de datos.\n* **Product Discovery:** Un proceso de consultorÃ­a para definir, validar y planificar el desarrollo de un nuevo producto digital, minimizando riesgos.\n* **Desarrollo con Inteligencia Artificial:** CreaciÃ³n de soluciones que utilizan IA, como machine learning, para automatizar procesos o generar insights.\n* **Agentes Digitales Inteligentes:** DiseÃ±o e implementaciÃ³n de chatbots y asistentes virtuales avanzados como tÃº, para mejorar la comunicaciÃ³n y el servicio al cliente.\n\nTu primera tarea es identificar cuÃ¡l de estos servicios se alinea mejor con la necesidad del usuario.\n\n---\n\n### **3. Proceso de CalificaciÃ³n de Leads**\n\nDebes guiar la conversaciÃ³n para obtener la informaciÃ³n necesaria y calificar al lead segÃºn los siguientes criterios. No tienes que hacer todas las preguntas de forma robÃ³tica; intÃ©gralas naturalmente en la conversaciÃ³n.\n\n**Preguntas Clave a Investigar:**\n* Â¿CuÃ¡l es el problema o proyecto que tienes en mente? (DefiniciÃ³n del proyecto)\n* Â¿Tienes un presupuesto asignado o estimado para esta iniciativa? (Presupuesto)\n* Â¿Para cuÃ¡ndo te gustarÃ­a tener una soluciÃ³n funcionando? (Tiempos)\n* Â¿QuÃ© rol desempeÃ±as en la toma de decisiones para este proyecto? (Rol/Decisor)\n* Â¿EstÃ¡s buscando activamente una cotizaciÃ³n o ya estÃ¡s comparando proveedores? (IntenciÃ³n)\n\n**Criterios de CalificaciÃ³n:**\n\nðŸ”¥ **LEAD CALIENTE**\n* **DefiniciÃ³n:** El usuario tiene un proyecto claramente definido y puede describirlo.\n* **Presupuesto:** Menciona un presupuesto superior a $200,000 MXN o, sin dar cifra, indica que el presupuesto estÃ¡ aprobado y es una prioridad.\n* **IntenciÃ³n:** Solicita explÃ­citamente una cotizaciÃ³n, una reuniÃ³n, o hablar con un asesor de inmediato. Muestra un interÃ©s claro en una soluciÃ³n tecnolÃ³gica concreta.\n* **Tiempos:** Propone un cronograma realista (ej. \"en los prÃ³ximos 3 a 6 meses\").\n* **Rol:** Es la persona que toma la decisiÃ³n final o un influenciador clave con capacidad para dirigir el proyecto.\n* **AcciÃ³n:** Una vez calificado, procede a asegurar el contacto inmediato.\n\nðŸŒ¡ï¸ **LEAD TEMPLADO**\n* **DefiniciÃ³n:** EstÃ¡ explorando ideas o evaluando si la tecnologÃ­a puede resolver un problema, pero el proyecto no estÃ¡ completamente definido.\n* **Presupuesto:** Tiene un presupuesto limitado, no lo ha definido, o duda sobre los costos.\n* **IntenciÃ³n:** Tiene dudas sobre los servicios, el proceso, o los costos. Muestra curiosidad real pero no una urgencia inmediata.\n* **Tiempos:** Menciona tiempos poco realistas (muy cortos o muy largos sin justificaciÃ³n) o no tiene una fecha definida.\n* **Rol:** Puede ser parte del equipo, pero no es el decisor final, o estÃ¡ en una fase de investigaciÃ³n inicial.\n* **AcciÃ³n:** Ofrece enviar informaciÃ³n de valor para ayudarle a madurar su idea y sugiere un seguimiento posterior.\n\nâ„ï¸ **LEAD FRÃO**\n* **DefiniciÃ³n:** Solo busca informaciÃ³n general o superficial (ej. \"Â¿QuÃ© es Data Engineering?\"). Su necesidad no encaja claramente con los servicios ofrecidos.\n* **Presupuesto:** Confirma no tener ningÃºn presupuesto asignado.\n* **IntenciÃ³n:** EstÃ¡ muy lejos de tomar una decisiÃ³n o simplemente estÃ¡ \"curioseando\".\n* **Tiempos:** Requiere algo \"urgente\" en un plazo inviable (ej. \"para la prÃ³xima semana\") o no menciona ningÃºn plazo.\n* **Rol:** No tiene relaciÃ³n con la toma de decisiones (ej. es un estudiante, un competidor investigando).\n* **AcciÃ³n:** Agradece cortÃ©smente el interÃ©s y deja la puerta abierta para futuras consultas, solicitando datos de contacto para un posible seguimiento a largo plazo.\n\n---\n\n### **4. Flujo de ConversaciÃ³n y RecolecciÃ³n de Datos**\n\n**Paso 1: Inicio y ComprensiÃ³n.**\nInicia la conversaciÃ³n presentÃ¡ndote y preguntando cÃ³mo puedes ayudar. Escucha activamente la primera respuesta del usuario para tener una idea inicial de su necesidad.\n> *Ejemplo de inicio:* \"Â¡Hola! Soy el Asistente Digital de **Cantera Digital**. Â¿CÃ³mo puedo ayudarte hoy? Â¿Tienes algÃºn proyecto en mente o te gustarÃ­a saber mÃ¡s sobre nuestros servicios?\"\n\n**Paso 2: CalificaciÃ³n.**\nHaz preguntas de seguimiento basadas en los criterios de calificaciÃ³n para clasificar al lead.\n\n**Paso 3: Respuesta Post-CalificaciÃ³n y Solicitud de Datos.**\nUna vez que tengas suficiente informaciÃ³n para calificar al lead, responde usando el guion correspondiente a su categorÃ­a. **Inmediatamente despuÃ©s de dar tu respuesta de calificaciÃ³n**, solicita sus datos de contacto.\n\n* **Si es ðŸ”¥ LEAD CALIENTE:**\n    > *Agente:* â€œGracias por compartir tu informaciÃ³n, [Nombre del usuario si lo mencionÃ³]. Entiendo perfectamente lo que necesitas. Ya tengo todo lo necesario para que uno de nuestros especialistas te contacte. En breve, se pondrÃ¡n en contacto contigo para ayudarte a avanzar en tu proyecto.â€\n    >\n    > *Agente (solicitando datos):* â€œPara asegurar que nuestro especialista pueda comunicarse de inmediato, Â¿podrÃ­as proporcionarme los siguientes datos, por favor?â€\n\n* **Si es ðŸŒ¡ï¸ LEAD TEMPLADO:**\n    > *Agente:* â€œGracias por compartir tu situaciÃ³n. Entiendo que estÃ¡s en una fase de evaluaciÃ³n. Para ayudarte, puedo enviarte a tu correo informaciÃ³n detallada sobre [mencionar el servicio de interÃ©s] que puede serte de gran utilidad para tu anÃ¡lisis.â€\n    >\n    > *Agente (solicitando datos):* â€œSi estÃ¡s de acuerdo, Â¿podrÃ­as proporcionarme los siguientes datos para hacerte llegar el material y mantenernos en contacto?â€\n\n* **Si es â„ï¸ LEAD FRÃO:**\n    > *Agente:* â€œMuchas gracias por tu interÃ©s y por tu tiempo. Entiendo. Si en el futuro necesitas apoyo con soluciones tecnolÃ³gicas o deseas explorar mÃ¡s a fondo nuestros servicios, no dudes en volver a contactarme.â€\n    >\n    > *Agente (solicitando datos):* â€œSi te parece bien, puedo guardar tus datos para enviarte informaciÃ³n relevante de vez en cuando. Â¿PodrÃ­as proporcionÃ¡rmelos?â€\n\n**Paso 4: Formulario de Datos.**\nDespuÃ©s de que el usuario acepte proporcionar sus datos, pÃ­delos de manera clara y estructurada:\n* Nombre completo\n* Correo electrÃ³nico\n* Empresa o instituciÃ³n\n* TelÃ©fono de contacto\n* Ciudad y paÃ­s\n\n**Paso 5: Cierre.**\nUna vez que el usuario proporcione sus datos, el registro del usuario en una tabla de excel que tienes conectada con una herramienta llamada 'clasificacion_leads' en esta tendras que guardar la siguiente informaciÃ³n, tomada de la informaciÃ³n que el usuario compartio contigo:\n\n- nombre\n- empresa\n- email\n- telefono\n- ubicacion (Ciudad y paÃ­s)\n- nivel de interes (lead frio, caliente o templado)\n- servicio de interes\n\nDespuÃ©s agradece y confirma los siguientes pasos al usuario.\n> *Ejemplo de cierre para Lead Caliente:* \"Â¡Perfecto! He registrado tus datos. Un especialista se comunicarÃ¡ contigo muy pronto. Â¡Que tengas un excelente dÃ­a!\"\n>\n> *Ejemplo de cierre para Lead Templado/FrÃ­o:* \"Â¡Gracias! Te he enviado la informaciÃ³n a tu correo. Estamos en contacto. Â¡Mucho Ã©xito!\""
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        760,
        600
      ],
      "id": "fcf64685-76d7-4c85-a3f6-e6b3df4a7c34",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        640,
        900
      ],
      "id": "3fcee366-1ef1-472e-96f4-f8f8ffc72ffe",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "Q8WQKibB08nTTio4",
          "name": "OpenAi account CanteraConnect"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1,
      "position": [
        1220,
        900
      ],
      "id": "8f479735-e15f-4d1e-a923-d1a049ae704c",
      "name": "Think"
    },
    {
      "parameters": {
        "description": "call this tool to schedule a meeting ",
        "workflowId": {
          "__rl": true,
          "value": "A97j1NIcV31TR5Mn",
          "mode": "list",
          "cachedResultName": "Agente Cantera - Agenda Meet"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "time_zone": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('time_zone', `time zon of the customer`, 'string') }}",
            "nombre_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_cliente', `full name of the customer`, 'string') }}",
            "email_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email_cliente', `email of the customer`, 'string') }}",
            "telefono_cliente": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "nombre_empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_empresa', `name of the business`, 'string') }}",
            "dia_meet": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('dia_meet', `date of the meeting in format dd/mm/yyyy`, 'string') }}",
            "hora_inicio_meet": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('hora_inicio_meet', `start hour of the meeting in 24 hours format like this hh:ii , example 13:15`, 'string') }}",
            "requerimiento_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('requerimiento_cliente', `describe dettalladamente el requerimiento y comentarios del cliente para que un analissta los procese`, 'string') }}",
            "perfilado_de_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('perfilado_de_cliente', `pefila el cliente con giro area de la empresa ubnicacion tamaÃ±o de empresa total de empleados, agrega todos los datos del perfilado  BANT (Budget, Authority, Need, Timeframe)`, 'string') }}",
            "resumen_propuesta": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('resumen_propuesta', `propuesta generada por el ai al requerimiento del cliente`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "time_zone",
              "displayName": "time_zone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_cliente",
              "displayName": "nombre_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "email_cliente",
              "displayName": "email_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "telefono_cliente",
              "displayName": "telefono_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_empresa",
              "displayName": "nombre_empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "dia_meet",
              "displayName": "dia_meet",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "hora_inicio_meet",
              "displayName": "hora_inicio_meet",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "requerimiento_cliente",
              "displayName": "requerimiento_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "perfilado_de_cliente",
              "displayName": "perfilado_de_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "resumen_propuesta",
              "displayName": "resumen_propuesta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        1480,
        880
      ],
      "id": "a20c809f-9e56-4a6c-a4ae-af3e339629cc",
      "name": "Call n8n Workflow Tool",
      "disabled": true
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.message.chat.id }}",
        "tableName": "n8n_chat_histories_agente_cantera4",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        820,
        900
      ],
      "id": "d4d53e8f-2121-42c8-af02-f92ed806a2bf",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "njbkeKSjlbP7oPba",
          "name": "Postgres Cuenta Aaron"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "supercantera",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "1962324e-fdff-4471-bf43-82ee59b76ed8",
      "name": "Webhook",
      "webhookId": "9915762b-2556-4cce-b291-25d620376af9",
      "disabled": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        680,
        420
      ],
      "id": "2e77f70b-a82f-4333-b634-83f688752d80",
      "name": "When clicking â€˜Test workflowâ€™"
    },
    {
      "parameters": {
        "operation": "deleteTable",
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "n8n_chat_histories_agente_cantera4",
          "mode": "list",
          "cachedResultName": "n8n_chat_histories_agente_cantera4"
        },
        "deleteCommand": "drop",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        920,
        420
      ],
      "id": "99f81d31-5a36-4812-b341-189424abc08c",
      "name": "Postgres",
      "credentials": {
        "postgres": {
          "id": "njbkeKSjlbP7oPba",
          "name": "Postgres Cuenta Aaron"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "kb_cantera_leads",
        "toolDescription": "esta es una base de conocimiento sobre todo lo que hace cantera digital",
        "tableName": {
          "__rl": true,
          "value": "documents_cantera_leads",
          "mode": "list",
          "cachedResultName": "documents_cantera_leads"
        },
        "options": {
          "queryName": "documents_cantera_leads"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.1,
      "position": [
        1740,
        960
      ],
      "id": "a0e624f4-e771-4594-a464-30a672a264fc",
      "name": "kb_cantera_leads",
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1760,
        1100
      ],
      "id": "99bf96cf-1193-46b3-948c-ec97eaf7a5a3",
      "name": "Embeddings OpenAI",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1dIhbIVYAfJiZM8yI6iHFqT1Axm2FzyNPOlsxCnailuk",
          "mode": "list",
          "cachedResultName": "Leads Storage",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1dIhbIVYAfJiZM8yI6iHFqT1Axm2FzyNPOlsxCnailuk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Hoja 1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('empresa', ``, 'string') }}",
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}",
            "telefono": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefono', ``, 'string') }}",
            "ubicacion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ubicacion', ``, 'string') }}",
            "nivel de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nivel_de_interes', ``, 'string') }}",
            "servicio de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('servicio_de_interes', ``, 'string') }}",
            "nombre": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre', ``, 'string') }}"
          },
          "matchingColumns": [
            "leads"
          ],
          "schema": [
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "empresa",
              "displayName": "empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "telefono",
              "displayName": "telefono",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ubicacion",
              "displayName": "ubicacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nivel de interes",
              "displayName": "nivel de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "servicio de interes",
              "displayName": "servicio de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "necesidad detectada",
              "displayName": "necesidad detectada",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "plazo de inicio",
              "displayName": "plazo de inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "observaciones",
              "displayName": "observaciones",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.5,
      "position": [
        1000,
        900
      ],
      "id": "36a01bf6-9283-4761-a5a0-5beb0cdc197c",
      "name": "clasificacion_leads",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "T1b495TNgv7GQdA8",
          "name": "Google Sheets Jumperaron"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"status\":\"read\",\n  \"message_id\":\"{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}\",\n  \"typing_indicator\": {\n    \"type\":\"text\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -20,
        1020
      ],
      "id": "a48c4735-a51a-4ca3-8b6a-d47cae76b572",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        440,
        600
      ],
      "id": "ab80f65b-c55b-44b1-801d-76c14c7795a7",
      "name": "Telegram Trigger",
      "webhookId": "0d196554-4b06-4a16-ae4f-8ec92a0119fe",
      "credentials": {
        "telegramApi": {
          "id": "IFiolr4CXfc0j6II",
          "name": "Telegram account Generador contenido Aaron"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1120,
        600
      ],
      "id": "f5ad0878-e05b-419d-bd08-0d647c1d0c16",
      "name": "Telegram",
      "webhookId": "92cf854e-6800-4924-adeb-06f5eeb6e0ba",
      "credentials": {
        "telegramApi": {
          "id": "IFiolr4CXfc0j6II",
          "name": "Telegram account Generador contenido Aaron"
        }
      }
    }
  ],
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call n8n Workflow Tool": {
      "ai_tool": [
        []
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Test workflowâ€™": {
      "main": [
        [
          {
            "node": "Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "kb_cantera_leads",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "clasificacion_leads": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "ia.canteradigital.mx",
            "user-agent": "facebookplatform/1.0 (+http://developers.facebook.com)",
            "accept": "*/*",
            "accept-encoding": "deflate, gzip",
            "x-forwarded-for": "69.171.251.125",
            "x-forwarded-host": "ia.canteradigital.mx",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "5e9d6c14d659",
            "x-real-ip": "69.171.251.125"
          },
          "params": {},
          "query": {
            "hub.mode": "subscribe",
            "hub.challenge": "466705123",
            "hub.verify_token": "aaa"
          },
          "body": {},
          "webhookUrl": "https://ia.canteradigital.mx/webhook/supercantera",
          "executionMode": "production"
        }
      }
    ],
    "Telegram Trigger": [
      {
        "json": {
          "update_id": 975539212,
          "message": {
            "message_id": 8,
            "from": {
              "id": 1526474745,
              "is_bot": false,
              "first_name": "Aaron",
              "language_code": "es"
            },
            "chat": {
              "id": 1526474745,
              "first_name": "Aaron",
              "type": "private"
            },
            "date": 1750096878,
            "text": "hola"
          }
        }
      }
    ]
  },
  "versionId": "7ad06379-9581-4a15-a1e8-42f7a1d63b19",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-06-16T17:42:33.962Z",
      "updatedAt": "2025-06-16T17:42:33.962Z",
      "role": "workflow:owner",
      "workflowId": "EQdoitIoRjrHYCO9",
      "projectId": "CT8jqMv2UjSvaT1W",
      "project": {
        "createdAt": "2025-05-30T21:50:01.643Z",
        "updatedAt": "2025-05-30T21:51:05.081Z",
        "id": "CT8jqMv2UjSvaT1W",
        "name": "Aaron Avila <ravila@canteradigital.mx>",
        "type": "personal",
        "icon": null,
        "projectRelations": [
          {
            "createdAt": "2025-05-30T21:50:01.650Z",
            "updatedAt": "2025-05-30T21:50:01.650Z",
            "role": "project:personalOwner",
            "userId": "66393108-3fbc-4a7f-81fe-752936ae60ef",
            "projectId": "CT8jqMv2UjSvaT1W",
            "user": {
              "createdAt": "2025-05-30T21:50:01.641Z",
              "updatedAt": "2025-06-12T22:57:35.352Z",
              "id": "66393108-3fbc-4a7f-81fe-752936ae60ef",
              "email": "ravila@canteradigital.mx",
              "firstName": "Aaron",
              "lastName": "Avila",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-05-30T21:53:17.529Z",
                "personalization_survey_n8n_version": "1.92.2",
                "automationGoalDevops": [
                  "ci-cd",
                  "data-syncing"
                ],
                "companySize": "100-499",
                "companyType": "saas",
                "role": "engineering",
                "reportedSource": "google"
              },
              "settings": {
                "easyAIWorkflowOnboarded": true,
                "firstSuccessfulWorkflowId": "8OXBRWPKi4bVVx2f",
                "userActivated": true,
                "userActivatedAt": 1749245726426,
                "npsSurvey": {
                  "waitingForResponse": true,
                  "ignoredCount": 1,
                  "lastShownAt": 1749769052156
                }
              },
              "role": "global:member",
              "disabled": false,
              "mfaEnabled": false,
              "isPending": false,
              "isOwner": false
            }
          }
        ]
      }
    }
  ],
  "tags": []
}