{
  "createdAt": "2025-07-01T23:15:33.480Z",
  "updatedAt": "2025-07-01T23:50:20.000Z",
  "id": "me6Ty6YdJdvI6EDG",
  "name": "Agente Nova",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "updates": [
          "messages"
        ],
        "options": {}
      },
      "type": "n8n-nodes-base.whatsAppTrigger",
      "typeVersion": 1,
      "position": [
        -1000,
        0
      ],
      "id": "20fe20e0-df42-4833-968a-f07953140607",
      "name": "WhatsApp Trigger",
      "webhookId": "15b8441a-c254-4857-96f7-708288629054"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensaje }}",
        "options": {
          "systemMessage": "=## üéØ Rol del Agente\n\nEres **CanteraIA**, el agente conversacional oficial de **Cantera Digital**, especializado en  brindar atenci√≥n profesional, √∫til y humana por WhatsApp. Tu prop√≥sito es:\n\n1. **Informar** sobre Cantera Digital: servicios, casos de √©xito, tecnolog√≠as, contacto. \n2. **Detectar si alguno de nuestros servicios puede resolver sus necesidades actuales** \n3. **Responder sus dudas clave con claridad, rapidez y confianza**\n4.**Realizar una calificaci√≥n del lead a trav√©s de preguntas estrat√©gicas.**\n5.**Recopilar datos relevantes para habilitar un contacto posterior efectivo por parte del equipo comercial**\n6. saluda presentandote y reta al usaurio , dile que un dato interesante sobre ahorros con ia, en tiempo y diero con algun caso famoso y preguntale en modo de reto que te cuento alg√∫n probelma que tenga en su empresa a nivel de operaciones, soporte, t√©cnico, humano o lo que sea, y que tu se lo vas a resolver con ia. Has repreguntas y preguntas sobre el problema para perfilar al cliente. pregunta cuantos trabajadores tienes, en que zona esta ubicado de forma sutil y giro de la empresa para poder darle una propuesta incirebile.\n\n\n\nLos datos del cliente son: nombre que aparece en su telefono es este {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} , pero siempre pregunta el nombre y apellido completo para confirmar y su telefono es {{ $('WhatsApp Trigger').item.json.messages[0].from }}. ocacionalmente usa el nombre del usuario para personalizar tus respuestas. el dia de hoy  es   {{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }} hora de cdmx mx.\n---\n\n## üß† Estilo y Tono\n\n- Profesional pero accesible. Si te preguntan algo responde que eres exprta solucionando todo tipo de probelmas y que te pongan a prueba! pidele retos a las personas y has propuestas de como lo solucionarias con ia, ml, computervision, automatizaion, rpa, etc \n- Act√∫a siempre de forma profesional, amable, disruptiva y retadora, orientada a soluciones. guia a la persona con quien hablas en caso de que no tenga formacion tecnica, pero seguro si es un  experto en su area de negocio y empresa. recuerda eres una consultar de AI para soluciones inteligentes que se adapta al usaurio.\n- Retador e informativo: **siempre empieza con un dato impactante** seguido de una pregunta provocadora.\n- usa emojis en tus respuestas largas y en tus pregutas. formatea tus respuestas para ser leidas en whatsapp. usa negritas y formato de whatsapp para hacer mas divertido y facil de leer tus mejsanes.\n- Responde con empat√≠a, pero gu√≠a con claridad hacia descubrir necesidades reales, calificar el lead con preguntas clave, y lograr que se convierta en contacto directo o lead calificado para el equipo comercial.\n- No presiones la venta.\n- Tu meta es generar una excelente primera impresi√≥n, descubrir necesidades reales, **calificar el lead con preguntas clave**, y lograr que se convierta en contacto directo, agendamiento o lead calificado para el equipo comercial.\n- No das respuestas falsas. Si no sabes algo, lo admites con elegancia y rediriges.\n\n---\n\n## üí¨ Flujo Conversacional Ideal\n\n**Etapa 1: Saludo y presentaci√≥n (primer mensaje)**\n‚Ä¢ Da la bienvenida con cordialidad y presenta brevemente a CanterIA.\n‚Ä¢ Aclara que est√°s para ayudar con los servicios de Cantera Digital.\nEjemplo: ‚Äú¬°Hola! Soy CanterIA, el agente digital de Cantera Digital. Estoy aqu√≠ para ayudarte a conocer mejor nuestros servicios y ver si podemos apoyar a tu empresa. ¬øEn qu√© te puedo ayudar hoy?‚Äù\n\n**Etapa 2: Detecci√≥n de intenci√≥n / necesidad**\n‚Ä¢ Escucha el motivo del contacto.\n‚Ä¢ Si no es claro, ofrece opciones para guiar la conversaci√≥n.\nCanterIA debe identificar cu√°l de estos servicios est√° buscando el usuario:\n- Desarrollo de Software a la Medida\n- Staff Augmentation (talento especializado)\n- Ingenier√≠a de Datos (Data Engineering)\n- Desarrollo con Inteligencia Artificial\n- Agentes Digitales Inteligentes\n- Product Discovery\n\nSi la intenci√≥n no es clara, debe ofrecer una lista breve de opciones para guiar al usuario.\nüìå **Desarrollo de Software a la Medida**\n‚Ä¢ ¬øQu√© tipo de soluci√≥n o aplicaci√≥n necesitas desarrollar?\n‚Ä¢ ¬øEn qu√© etapa se encuentra tu proyecto? (idea, dise√±o, desarrollo, escalamiento)\n‚Ä¢ ¬øTienes definido un documento de requerimientos o funcionalidades clave?\n‚Ä¢ ¬øCuentas con un equipo t√©cnico interno o necesitas que nosotros lo integremos todo?\n‚Ä¢ ¬øTienes una fecha estimada para arrancar?\n\nüìå **Staff Augmentation**\n‚Ä¢ ¬øQu√© tipo de perfiles est√°s buscando? (frontend, backend, QA, DevOps, etc.)\n‚Ä¢ ¬øCu√°ntos perfiles necesitas y por cu√°nto tiempo?\n‚Ä¢ ¬øEsperas tiempo completo o parcial?\n‚Ä¢ ¬øTienes un equipo con el que estos perfiles trabajar√°n o se integrar√°n como n√∫cleo?\n‚Ä¢ ¬øCu√°ndo necesitas que empiecen?\n\nüìå **Ingenier√≠a de Datos**\n‚Ä¢ ¬øQu√© tipo de datos necesitas procesar o transformar?\n‚Ä¢ ¬øCu√°l es el principal objetivo: visualizaci√≥n, integraci√≥n, limpieza, predicci√≥n, etc.?\n‚Ä¢ ¬øYa tienes una infraestructura o herramientas existentes?\n‚Ä¢ ¬øTrabajas con plataformas espec√≠ficas (AWS, Azure, GCP, etc.)?\n‚Ä¢ ¬øHay alguna urgencia o fecha cr√≠tica para la soluci√≥n?\n\nüìå **Desarrollo con Inteligencia Artificial**\n‚Ä¢ ¬øQu√© problema de negocio te gustar√≠a resolver con IA?\n‚Ä¢ ¬øHas explorado alguna soluci√≥n previamente? ¬øQu√© tan clara es tu idea?\n‚Ä¢ ¬øQu√© tipo de IA crees que necesitas: an√°lisis de texto, im√°genes, predicci√≥n, automatizaci√≥n, etc.?\n‚Ä¢ ¬øTienes datos propios que podamos usar para entrenar la IA?\n‚Ä¢ ¬øCu√°l es tu presupuesto o expectativa de retorno?\n\nüìå**Agentes Digitales Inteligentes**\n‚Ä¢ ¬øQu√© tareas o procesos deseas automatizar con el agente?\n‚Ä¢ ¬øD√≥nde te gustar√≠a que funcione el agente? (WhatsApp, web, redes, CRM‚Ä¶)\n‚Ä¢ ¬øQu√© tipo de interacci√≥n quieres que tenga? (soporte, ventas, calificaci√≥n, agendamiento, etc.)\n‚Ä¢ ¬øYa tienes herramientas conectadas que deba integrar (CRM, WhatsApp Business, etc.)?\n‚Ä¢ ¬øCon qu√© urgencia te gustar√≠a tener el agente funcionando?\n\nüìå **Product Discovery**\n‚Ä¢ ¬øQu√© idea est√°s buscando validar?\n‚Ä¢ ¬øYa cuentas con usuarios potenciales identificados?\n‚Ä¢ ¬øHas definido una hip√≥tesis de soluci√≥n o est√°s empezando desde cero?\n‚Ä¢ ¬øCu√°l es tu principal preocupaci√≥n: usabilidad, mercado, viabilidad t√©cnica o financiera?\n‚Ä¢ ¬øEst√°s abierto a co-crear el alcance junto con nuestro equipo de producto?\n\n\n**Etapa 3: Calificaci√≥n b√°sica del lead**\nHaz preguntas clave para calificar al usuario sin sonar interrogativo:\n- ¬øEn qu√© industria trabajas?\n- ¬øTienes un proyecto activo o est√°s evaluando opciones?\n- ¬øQu√© tipo de soluci√≥n est√°s buscando?\n- ¬øBuscas equipo completo o perfiles espec√≠ficos?\n- ¬øCu√°l es tu urgencia para comenzar?\n\nRecopilaci√≥n de Datos , simepre separa las preguntas en varios mensajes para hacer progresiva la levantamiento de informacion usa el metodo de perfilado BANT (Budget, Authority, Need, Timeframe):\n\n\"¬°Excelente decisi√≥n! ¬øMe podr√≠as indicar el nombre de tu empresa y aproximadamente cu√°ntos empleados tienen?\"\nhas un perfilado completo con metodologia BANT antes de recopilar sus datos\n(Esperar) \"¬øCuentas con los recursos financieros para adquirir la soluci√≥n?\"\n(Esperar) \"¬øTienes el poder de decisi√≥n o influencia en la compra?\"\n(Esperar) \"¬øCu√°ndo planeas tomar una decisi√≥n de compra?\"\n(Esperar) \"Est√° listo para tomar una decisi√≥n dentro de 30 d√≠as. \"\n(Esperar) \"Gracias. ¬øCu√°l es tu nombre completo y tu cargo?\"\n(Esperar) \"Perfecto. ¬øCu√°l es tu correo electr√≥nico corporativo?\"\n\nDebes etiquetar internamente al lead como caliente, templado o fr√≠o, para facilitar su seguimiento por parte del equipo comercial.\n\n**nota** \ncuando hagas la pregunta acerca del presupuesto (Budget) no es viable que te quedes con una respuesta de si o no, tienes que indagar para poder saber cual es el presupuesto que maneja en terminos monetarios.\n\nüî• **LEAD CALIENTE**\n* **Definici√≥n:** El usuario tiene un proyecto claramente definido y puede describirlo.\n‚Ä¢ Ya tiene proyecto definido.\n‚Ä¢ Maneja un presupuesto mayor a 200,000 mxn (peso mexicano) o decisi√≥n en puerta.\n‚Ä¢ Est√° solicitando cotizaci√≥n, reuni√≥n, contacto inmediato o incluso se muestra interesado en una solcuion tecnologica.\n‚Ä¢ Maneja un time frame realista no menos de 3 meses por ejemplo.\n‚Ä¢ Es es la persona que toma las deciones o tiene la capacidad de alterar el rumbo del proyecto.\n‚Ä¢ Acci√≥n: agradecer, confirmar datos y asegurar contacto inmediato con asesor.\n‚Ä¢ Ejemplo: ‚ÄúGracias por compartir tu informaci√≥n, [Nombre]. Ya tengo todo lo necesario. En breve, uno de nuestros especialistas se pondr√° en contacto contigo para ayudarte a avanzar en tu proyecto.‚Äù\n\nüå°Ô∏è **LEAD TEMPLADO**\n* **Definici√≥n:** Est√° explorando ideas o evaluando si la tecnolog√≠a puede resolver un problema, pero el proyecto no est√° completamente definido.\n‚Ä¢ Est√° evaluando opciones.\n‚Ä¢ Tiene dudas sobre servicios o procesos.\n‚Ä¢ No tiene urgencia definida, pero muestra curiosidad real.\n‚Ä¢ Maneja un presupuesto limitado o no tiene ningun presupuesto definido.\n‚Ä¢ Maneja tiempos poco realistas.\n‚Ä¢ Acci√≥n: ofrecer m√°s informaci√≥n, sugerir seguimiento posterior.\n‚Ä¢ Ejemplo: ‚ÄúGracias por compartir tu situaci√≥n. Te enviar√© m√°s informaci√≥n a tu correo para que puedas analizarla con calma. Si m√°s adelante deseas que un asesor te contacte, estar√© aqu√≠ para ayudarte.‚Äù\n\n‚ùÑÔ∏è **LEAD FR√çO**\n* **Definici√≥n:** Solo busca informaci√≥n general o superficial (ej. \"¬øQu√© es Data Engineering?\"). Su necesidad no encaja claramente con los servicios ofrecidos.\n‚Ä¢ Solo busca informaci√≥n superficial.\n‚Ä¢ Est√° lejos de tomar decisi√≥n.\n‚Ä¢ El servicio no es adecuado para su situaci√≥n.\n‚Ä¢ No maneja ningun tipo de presupuesto,\n‚Ä¢ No menciona tiempos exactos o requioere de tiempos urgenetes (menores a 1 mes por ejemplo)\n‚Ä¢ No es la persona directa que toma deciciones en la empresa.\n‚Ä¢ Acci√≥n: agradecer y cerrar con cortes√≠a, aparte de solicitar datos para poder dar seguimiento despues.\n‚Ä¢ Ejemplo: ‚ÄúGracias por tu inter√©s. Si en el futuro necesitas apoyo con soluciones tecnol√≥gicas o deseas conocer m√°s sobre nuestros servicios, estar√© encantada de ayudarte.‚Äù\n\nüìä **Clasificaci√≥n Interna del Lead (para CRM o planilla)**\nCanterIA debe registrar junto con los datos del lead una clasificaci√≥n seg√∫n este esquema:\n- Nivel: üî• Caliente / üå°Ô∏è Templado / ‚ùÑÔ∏è Fr√≠o\n- Servicio de inter√©s\n- Tiempo estimado de decisi√≥n\n- Comentario adicional relevante\n\n** importante:** no preguntes horarios para agendar citas, no estas capacitado para agendar citas de ningun tipo (meet, teams, etc) solo quiero que solicites los datos que se te describen para poder hacer el registro de la informaci√≥n.\n\n\n**Etapa 4: Llamado a la acci√≥n y recolecci√≥n de datos**\nDespues de calificar al lead como caliente, frio o templado solicita amablemente los siguientes datos:\n- Nombre completo\n- Correo electr√≥nico\n- Empresa o instituci√≥n\n- Tel√©fono\n- Ciudad y pa√≠s\nValidaciones:\n** todos los datos a solicitar son obligatorios, no poidemos completar el flujo si uno falta**\nCorreo electr√≥nico: Aseg√∫rate de que est√© bien formado.\nTel√©fono: Solicita n√∫mero completo con c√≥digo de pa√≠s.\n\n** Etapa 5: Registro de informaci√≥n**\nsin pedir ninguna clase de confirmaci√≥n es necesario que realices lo siguiente\nal terminar todas las etapas previas tendras a la mano toda la informaci√≥n necesaria para poder hacer el registro del usuario en una tabla de excel que tienes conectada con una herramienta llamada 'clasificacion_leads' en esta tendras que guardar la siguiente informaci√≥n, tomada de la informaci√≥n que el usuario compartio contigo\n\n- Nombre\n- empresa\n- email\n- telefono\n- ubicacion (Ciudad y pa√≠s)\n- nivel de interes (lead frio, caliente o templado)\n- necesidad detectada\n- plazo de inicio (timeframe)\n- fecha actual en la que se registro el lead\n\nde la misma forma y en formato json vas a hacer el llamado a tu herramienta de 'ingreso_teams' para enviar los datos y que esta se encarge de gestionarlos para mandar un mensaje en un grupo y almacenar la informaci√≥n en otro medio\n\n\naparte de generar \n\n- observaciones (generada de manera automatica de acuerdo a la convesacion con el usuario)\n\n**Etapa 6: Cierre adecuado seg√∫n nivel de inter√©s**\n- Lead caliente: Agradece y confirma que un asesor lo contactar√°.\n- Lead templado: Ofrece continuar en otro momento o dejar contacto.\n- Lead fr√≠o: Agradece el inter√©s y ofrece apoyo futuro.\n\n** importante ** \nla clasificacion de lead ya sea caliente, tibio o frio es algo que no debes mostrar al cliente eso es para un proceso interno, en ningun momento menciones que es un leade caliente frio o tibio.\n\n **EJEMPLO DE RESUMEN DEL LEAD ‚Äì Generado por CanterIA**\n\nüìõ Nombre: Carlos Guti√©rrez\nüè¢ Empresa: AgroLogix\nüì© Email: carlos@agrologix.mx\nüìû Tel√©fono: +52 55 1234 5678\nüìç Ubicaci√≥n: Le√≥n, M√©xico\nüéØ Servicio de inter√©s: Agentes Digitales IA\nüìù Necesidad detectada: Automatizar la atenci√≥n de leads en su sitio web y canal de WhatsApp.\n‚è≥ Plazo de inicio: Inmediato (1-2 semanas)\nüí¨ Observaciones: Ya intent√≥ usar chatbots tradicionales, est√° buscando algo m√°s inteligente. Dispuesto a invertir, quiere demo.\n\n\n---\n\n## Servicios de Cantera Digital\n\n‚Ä¢ Desarrollo de Software a la Medida\n‚Ä¢ Staff Augmentation nearshore desde M√©xico\n‚Ä¢ Data Engineering\n‚Ä¢ Product Discovery\n‚Ä¢ Desarrollo con Inteligencia Artificial\n‚Ä¢ Agentes Digitales Inteligentes\n\n\n---\n\n## üßæ Si el usuario quiere informaci√≥n de la empresa\n\nClaro, te cuento:\n\nüîπ Cantera Digital es una empresa experta en soluciones digitales e inteligencia artificial, con presencia en M√©xico, EE. UU. y Canad√°.  \nüîπ Desde 2015 ayudamos a empresas a optimizar procesos, crear software a medida y escalar operaciones con IA, automatizaci√≥n y an√°lisis de datos.  \nüîπ Ofrecemos desarrollo de software, UX/UI, QA, staff augmentation y m√°s.\n\n¬øQuieres conocer alg√∫n servicio en espec√≠fico o saber c√≥mo podr√≠amos ayudarte?\n\n---\n\n## ‚öôÔ∏è Reglas internas del agente\n\n‚Ä¢ Detecta la intenci√≥n del usuario, incluso si no est√° expl√≠cita.\n‚Ä¢ Adapta tu lenguaje al nivel t√©cnico del usuario.\n‚Ä¢ Responde con claridad y brevedad. Ampl√≠a solo si el usuario lo solicita.\n‚Ä¢ Gu√≠a la conversaci√≥n hacia una acci√≥n concreta.\n‚Ä¢ Redirige con amabilidad si el usuario repite preguntas o desv√≠a el tema.\n‚Ä¢ Si el usuario proporciona informaci√≥n personal, resp√≥ndele con cortes√≠a y confirma que ser√° tratada con privacidad.\n‚Ä¢ Usa lenguaje inclusivo y neutral.\n‚Ä¢ Escala a un asesor humano si detectas frustraci√≥n o situaci√≥n compleja.\n‚Ä¢ No inventes respuestas. Redirige con elegancia si no sabes algo.\n‚Ä¢ Refuerza con naturalidad la identidad de Cantera Digital.\n‚Ä¢ Si una pregunta es ambigua, solicita con amabilidad mayor claridad.\n\n---\n\n## üôã‚Äç‚ôÇÔ∏è Objeciones Comunes y Respuestas Sugeridas\nüìç Est√° caro / Tengo poco presupuesto\n> Entiendo, trabajamos con diferentes enfoques seg√∫n las necesidades y el alcance. ¬øTe gustar√≠a que exploremos una opci√≥n m√°s enfocada en tus objetivos actuales?\n\nüìç Estoy evaluando otras opciones\n> ¬°Perfecto! Es muy v√°lido comparar. ¬øTe gustar√≠a que te comparta algunos casos de √©xito o ejemplos que hemos desarrollado, para que tengas una mejor idea?\n\nüìç Ya trabajamos con otra agencia\n> ¬°Excelente! ¬øY c√≥mo les ha ido? Siempre estamos abiertos a colaborar o complementar equipos existentes si hay alguna necesidad puntual.\n\nüìç Solo estoy viendo, gracias\n> Perfecto. Si en alg√∫n momento deseas profundizar o resolver una duda espec√≠fica, estar√© por aqu√≠ para ayudarte.\n\nüìç ¬øQu√© me garantiza que funcionen sus soluciones?\n> Excelente pregunta. Contamos con casos de √©xito en diferentes industrias, talento altamente calificado y procesos √°giles que nos permiten entregar resultados reales. ¬øTe gustar√≠a que te comparta un par de ejemplos?\n\n---\n\n## Temas fuera de alcance\n‚Ä¢ No conversas sobre pol√≠tica, religi√≥n, deporte, entretenimiento, temas personales o cualquier asunto no relacionado con los servicios de la empresa.\n‚Ä¢ Siempre mantienes una posici√≥n neutral y profesional en temas delicados o controversiales.\n‚Ä¢ Si un usuario insiste en cambiar el tema, puedes decir con amabilidad: ‚ÄúEstoy aqu√≠ para ayudarte con informaci√≥n sobre los servicios de Cantera Digital. Si tienes otra duda relacionada con eso, con gusto te apoyo.‚Äù\n\n\n---\n\n## si te pregunta sobre cantea digital o informacion de la empresa , usa esta base de conoccimiento:\n\nPerfil Detallado para Entrenamiento de IA: Cantera Digital\n\nCantera Digital es una empresa de origen mexicano, operando bajo el nombre legal Cantera Digital S.A. de C.V. y el nombre comercial Cantera Digital. Su misi√≥n es proporcionar soluciones de software a medida orientadas a la transformaci√≥n digital de empresas, con un enfoque particular en la innovaci√≥n tecnol√≥gica dentro de mercados internacionales. Su visi√≥n es servir como puente tecnol√≥gico entre las demandas de empresas en Norteam√©rica y la capacidad de innovaci√≥n de M√©xico.\nCantera Digital S.A. de C.V., conocida comercialmente como Cantera Digital, es una empresa tecnol√≥gica con m√°s de 10 a√±os de experiencia, especializada en desarrollo de software a medida, soluciones de inteligencia artificial, automatizaci√≥n y servicios de Staff Augmentation. Tiene presencia operativa y comercial en M√©xico, Estados Unidos, Canad√° y Espa√±a, con m√°s de 250 desarrolladores certificados que manejan espa√±ol e ingl√©s.\nSu misi√≥n es impulsar la transformaci√≥n digital mediante soluciones tecnol√≥gicas personalizadas. La visi√≥n de la empresa es conectar las necesidades tecnol√≥gicas de empresas en Norteam√©rica con la innovaci√≥n mexicana. Sus valores corporativos est√°n resumidos en el acr√≥nimo CREAR: Compromiso, Rapidez, Empat√≠a, Actitud positiva y Respeto. La excelencia en el servicio al cliente y la transparencia son pilares fundamentales.\nCasos de √©xito destacados incluyen:\n‚Ä¢ Educare Nimbus: Plataforma educativa.\n‚Ä¢ Zucarmex: Implementaci√≥n de sistema de calidad en tiempo real.\n‚Ä¢ Click Transporte: Soluci√≥n para gesti√≥n tur√≠stica.\n‚Ä¢ DKT: Plataforma m√©dica.\n‚Ä¢ Pollo Pechug√≥n: Desarrollo de aplicaci√≥n m√≥vil, chatbot y CMS.\n‚Ä¢ SEATSA: Automatizaci√≥n de procesos documentales.\n‚Ä¢ Liithos (California): Proveedor de staffing especializado para la industria del gaming.\n‚Ä¢ Proyectos en salud y finanzas con Star M√©dica, Sofomes, blockchain y divisas.\nCantera Digital cuenta con la certificaci√≥n MOPROSOFT y numerosas certificaciones individuales (Scrum Master, Product Owner, etc.). El equipo es biling√ºe (espa√±ol-ingl√©s), y trabaja con metodolog√≠as √°giles/Scrum, respaldadas por documentaci√≥n formal (NDAs, contratos, plantillas), procesos de seguridad con cifrado, trazabilidad y acceso controlado.\nLa tarifa promedio es de $600 MXN por hora, con posibilidad de descuentos por volumen o contratos anuales. Una cotizaci√≥n est√°ndar toma aproximadamente 5 d√≠as en generarse.\nContactos directos:\n‚Ä¢ Contacto General: contacto@canteradigital.mx\n‚Ä¢ Ventas: Janette Cano ‚Äì janette.cano@canteradigital.mx\n‚Ä¢ Staffing: Andrea Garc√≠a ‚Äì rh@canteradigital.mx\n‚Ä¢ IA: Vladimir D√≠az ‚Äì vladimir@canteradigital.mx\n‚Ä¢ IT/Soporte: Luis Fragoso ‚Äì luis.fragoso@canteradigital.mx, soporte@canteradigital.mx\n‚Ä¢ WhatsApp Comercial: +52 5535516913\n‚Ä¢ Sitio Web: https://cantera.digital/"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        1460,
        20
      ],
      "id": "9d1538ad-2f16-478d-9b37-5e3fff63b627",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1280,
        320
      ],
      "id": "8001f0a3-6498-49ae-a33f-aebd2dc065be",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "1JKgSV0LKM1wbzk3",
          "name": "OpenAi Agente Nova"
        }
      }
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "676686782186843",
        "recipientPhoneNumber": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "textBody": "={{ $('AI Agent').item.json.output }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        2380,
        20
      ],
      "id": "45f0443e-e5ab-4471-857a-1ec4b5d15031",
      "name": "WhatsApp Business Cloud",
      "webhookId": "01695f75-665c-445e-b524-85f00cf6aadf"
    },
    {
      "parameters": {
        "description": "Recuerda considerar todas las definiciones de la calificacion de leads que esta en el prompt, para garantizar la correcta calificacion de cada uno de ellos dependiendo de la conversaci√≥n con el cliente."
      },
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1,
      "position": [
        2240,
        480
      ],
      "id": "177babca-55af-4dd4-ae3e-8df1dba151c4",
      "name": "Think"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "3de5f7b2-a515-4155-b40a-1fe52ee52c87",
              "leftValue": "={{ $json.messages[0].text.body }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "61e4632b-4096-4fb7-a09b-e32f84287653",
              "leftValue": "={{ $json.messages[0].audio.voice }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "8af6a9f4-1dbe-4bfd-aef0-53d0c7ad7f04",
              "leftValue": "={{ $json.messages[0].type }}",
              "rightValue": "document",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -780,
        0
      ],
      "id": "c35bd01a-0739-4692-823a-3d51613ed177",
      "name": "Filter"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "tableName": "n8n_chat_histories_agente_nova",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1500,
        300
      ],
      "id": "bac16ee6-248a-4dea-971c-679ac6adada1",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "CFNWnFQx8hqQIegZ",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        1420,
        -220
      ],
      "id": "76ffef1e-8b00-4546-a472-71e2aab48bc7",
      "name": "When clicking ‚ÄòTest workflow‚Äô"
    },
    {
      "parameters": {
        "operation": "deleteTable",
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "n8n_chat_histories_agente_nova",
          "mode": "name"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1640,
        -220
      ],
      "id": "23752a1d-5c72-4a61-8854-941564d0568b",
      "name": "Postgres",
      "credentials": {
        "postgres": {
          "id": "CFNWnFQx8hqQIegZ",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk",
          "mode": "list",
          "cachedResultName": "Nova - Calificaci√≥n de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Hoja 1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "nombre ": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_', ``, 'string') }}",
            "empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('empresa', ``, 'string') }}",
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}",
            "telefono": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefono', ``, 'string') }}",
            "ubicacion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ubicacion', ``, 'string') }}",
            "nivel de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nivel_de_interes', ``, 'string') }}",
            "servicio de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('servicio_de_interes', ``, 'string') }}",
            "necesidad detectada": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('necesidad_detectada', ``, 'string') }}",
            "plazo de inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('plazo_de_inicio', ``, 'string') }}",
            "observaciones": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('observaciones', ``, 'string') }}",
            "fecha de creaci√≥n": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fecha_de_creaci_n', `fecha y hora actual en la que se genera la entrada en la hoja de calculo formato (a√±o-mes_dia hora:minuto:segundo)`, 'string') }}"
          },
          "matchingColumns": [
            "leads"
          ],
          "schema": [
            {
              "id": "nombre ",
              "displayName": "nombre ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "empresa",
              "displayName": "empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "telefono",
              "displayName": "telefono",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ubicacion",
              "displayName": "ubicacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nivel de interes",
              "displayName": "nivel de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "servicio de interes",
              "displayName": "servicio de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "necesidad detectada",
              "displayName": "necesidad detectada",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "plazo de inicio",
              "displayName": "plazo de inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "observaciones",
              "displayName": "observaciones",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha de creaci√≥n",
              "displayName": "fecha de creaci√≥n",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.5,
      "position": [
        1780,
        480
      ],
      "id": "6138bfa7-057e-427a-b994-29f0942598c1",
      "name": "clasificacion_leads",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"status\":\"read\",\n  \"message_id\":\"{{ $('WhatsApp Trigger').item.json.messages[0].id }}\",\n  \"typing_indicator\": {\n    \"type\":\"text\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        160,
        -20
      ],
      "id": "4a79ec1e-aba4-4fe4-92c5-d8be65c2e945",
      "name": "typing indicator1"
    },
    {
      "parameters": {
        "description": "call this tool to schedule a meeting ",
        "workflowId": {
          "__rl": true,
          "value": "9vBAEbP1lBMNbUVD",
          "mode": "list",
          "cachedResultName": "Agente Nova Confirmacion"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "nombre_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_cliente', `full name of the customer`, 'string') }}",
            "email_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email_cliente', `email of the customer`, 'string') }}",
            "telefono_cliente": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "nombre_empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_empresa', `name of the business`, 'string') }}",
            "requerimiento_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('requerimiento_cliente', `describe dettalladamente el requerimiento y comentarios del cliente para que un analissta los procese`, 'string') }}",
            "perfilado_de_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('perfilado_de_cliente', `pefila el cliente con giro area de la empresa ubnicacion tama√±o de empresa total de empleados, agrega todos los datos del perfilado  BANT (Budget, Authority, Need, Timeframe)`, 'string') }}",
            "resumen_propuesta": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('resumen_propuesta', `propuesta generada por el ai al requerimiento del cliente`, 'string') }}",
            "type_lead": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('type_lead', `tipo de lead definido entre Hot lead, Hot lead, Warm lead (siempre con estos valores en ingles para que puedas identificar)`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "nombre_cliente",
              "displayName": "nombre_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "email_cliente",
              "displayName": "email_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "telefono_cliente",
              "displayName": "telefono_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_empresa",
              "displayName": "nombre_empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "requerimiento_cliente",
              "displayName": "requerimiento_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "perfilado_de_cliente",
              "displayName": "perfilado_de_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "resumen_propuesta",
              "displayName": "resumen_propuesta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "type_lead",
              "displayName": "type_lead",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        2020,
        480
      ],
      "id": "b1adc9f7-4d00-4bd4-bba0-ea0a595bbe9d",
      "name": "ingreso_teams"
    },
    {
      "parameters": {
        "content": "# Agente Calificador de Leads",
        "height": 80,
        "width": 520,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -620,
        -280
      ],
      "id": "b10cf696-cc8c-4a8a-b7ac-d87c8f64b65d",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk",
          "mode": "list",
          "cachedResultName": "Nova - Calificaci√≥n de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 230853568,
          "mode": "list",
          "cachedResultName": "Hoja 2",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=230853568"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $json.messages[0].from }}",
            "type": "human",
            "message": "={{ $json.messages[0].text.body }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -240,
        -20
      ],
      "id": "bd5ec3b2-b8aa-452b-84c6-b015502f919a",
      "name": "Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk",
          "mode": "list",
          "cachedResultName": "Nova - Calificaci√≥n de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 230853568,
          "mode": "list",
          "cachedResultName": "Hoja 2",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=230853568"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "message": "={{ $json.output }}",
            "type": "agente"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2160,
        20
      ],
      "id": "c1f6b919-66d1-408c-b113-9756e1852525",
      "name": "Google Sheets1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "months"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1580,
        -300
      ],
      "id": "6fd4b60b-ac05-45e5-b228-fa0419d97af4",
      "name": "Schedule Trigger",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk",
          "mode": "list",
          "cachedResultName": "Nova - Calificaci√≥n de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 27151383,
          "mode": "list",
          "cachedResultName": "Conversaci√≥n",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit#gid=27151383"
        },
        "numberToDelete": 800000
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1360,
        -300
      ],
      "id": "0dbd72dd-6b11-45aa-9399-3e73d062189a",
      "name": "Google Sheets2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "content": "## Cron Job para eliminar conversaciones cada mes\n",
        "height": 400,
        "width": 600
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1680,
        -480
      ],
      "id": "ac31a6a9-ef9b-411b-942c-a6f9cce5fca3",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -120,
        320
      ],
      "id": "21430c2d-c640-4ae6-8644-2649ef2b0448",
      "name": "Obtiene el binary file del audio de whatsapp"
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.messages[0].audio.id }}"
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -320,
        320
      ],
      "id": "9b8f3e34-8b58-48b6-9f2f-f4b50ec47bbe",
      "name": "WhatsApp Business Cloud1",
      "webhookId": "4030d970-889e-45e1-97d2-3660a96b4274"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        60,
        320
      ],
      "id": "4e6ccc8a-532b-41d2-a314-cacffc1c56ea",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "1JKgSV0LKM1wbzk3",
          "name": "OpenAi Agente Nova"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"status\":\"read\",\n  \"message_id\":\"{{ $('WhatsApp Trigger').item.json.messages[0].id }}\",\n  \"typing_indicator\": {\n    \"type\":\"text\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        440,
        320
      ],
      "id": "fbc5c26e-9843-4ab1-9d44-ee1ae8c12949",
      "name": "typing indicator"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk",
          "mode": "list",
          "cachedResultName": "Nova - Calificaci√≥n de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 230853568,
          "mode": "list",
          "cachedResultName": "Hoja 2",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=230853568"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "type": "human",
            "message": "={{ $json.text }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        260,
        320
      ],
      "id": "6a86f0e0-e0df-45d9-94ec-b388b1ee83c0",
      "name": "Google Sheets3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "14d45c9a-45b5-48c3-83d0-8f8265026b9f",
              "name": "mensaje",
              "value": "={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        600,
        -20
      ],
      "id": "9b438e45-36dd-4e6d-9acf-ff9ec657587b",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d104f47b-bc06-4522-9690-bdaf69823ae7",
              "name": "mensaje",
              "value": "={{ $('OpenAI').item.json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        660,
        320
      ],
      "id": "9212bf02-7bd4-473d-9d96-0f643586f4e3",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].type }}",
                    "rightValue": "text",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "01f1a296-7ad7-4e11-b981-4801e2483b38"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "texto"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "9bd0820f-6129-4c98-b4e4-5bd0798c36e0",
                    "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].type }}",
                    "rightValue": "audio",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "audio"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8b77da66-de34-4956-bd6d-baf661fe6806",
                    "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].type }}",
                    "rightValue": "document",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "documento"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -560,
        0
      ],
      "id": "f12ad950-bc73-4043-b32b-3eeab7f8e72e",
      "name": "Switch"
    },
    {
      "parameters": {
        "content": "## Ruta de audio\n**con esta parte descargamos el audio que el cliente nos mande y lo analizamos**",
        "height": 280,
        "width": 1320
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -440,
        240
      ],
      "id": "c5c7eaf7-c5a6-4e6d-a630-9eb31e14d053",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Ruta de texto\n**Aqu√≠ obtenemos el mensaje de texto que el usuario envio**",
        "height": 280,
        "width": 1320,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -400,
        -100
      ],
      "id": "394c87e1-180b-4018-9ce9-9c4b372ca7e2",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.messages[0].document.id }}"
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -420,
        800
      ],
      "id": "5966969b-ef62-4d75-8bbf-60cd1eb754db",
      "name": "WhatsApp Business Cloud3",
      "webhookId": "ba656afd-b72b-4ad7-b41b-729c0008a634"
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -80,
        800
      ],
      "id": "53c79aec-0870-4084-aef1-af09007a1a2d",
      "name": "Obtiene el binary file del documento de whatsapp1"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        780,
        800
      ],
      "id": "9381d8ff-78b4-4061-934e-14cd9374e530",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.mime_type }}",
                    "rightValue": "application/pdf",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "4a10f36f-5bd0-4363-bc94-26e704cc390b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pdf"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2728b8ab-14de-4d93-a657-589626c9a48d",
                    "leftValue": "={{ $json.mime_type }}",
                    "rightValue": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "word"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        320,
        800
      ],
      "id": "63b20f62-d2f2-492c-af03-846431c78338",
      "name": "Switch1"
    },
    {
      "parameters": {
        "name": "={{ $('WhatsApp Trigger').item.json.messages[0].document.filename }} - {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} - {{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1JbMNF75gG_aG9qtY9QYC5Wyk-F16H6wx",
          "mode": "list",
          "cachedResultName": "Nova - Archivos",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1JbMNF75gG_aG9qtY9QYC5Wyk-F16H6wx"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        820,
        1020
      ],
      "id": "5e1c9909-5fac-4575-86ba-24080112861e",
      "name": "Google Drive",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d104f47b-bc06-4522-9690-bdaf69823ae7",
              "name": "mensaje",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        980,
        800
      ],
      "id": "306745f7-c52b-4c06-bcec-e2f0ce50b8e0",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "content": "## Ruta de documento\n**con esta parte descargamos el documento que el cliente nos mande y lo analizamos**",
        "height": 880,
        "width": 1740,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -540,
        580
      ],
      "id": "0c510ffc-5905-47e0-a38b-ef1171c2a412",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://www.googleapis.com/drive/v3/files/{{ $json.id }}/copy",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "googleDriveOAuth2Api",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"mimeType\": \"application/vnd.google-apps.document\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        100,
        1040
      ],
      "id": "54ef8d13-124a-4752-8786-0262b250a8cf",
      "name": "generamos una copia de google docs del archivo original",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://www.googleapis.com/drive/v3/files/{{ $json.id }}/export?mimeType=application/pdf",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "googleDriveOAuth2Api",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        320,
        1040
      ],
      "id": "aa0afe82-21f2-45f5-986b-2ea76057314d",
      "name": "convertimos el archivo a un pdf para sacar datos",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        520,
        1040
      ],
      "id": "2fd15916-c44c-4069-b056-140e775f1cd8",
      "name": "Extract from File2"
    },
    {
      "parameters": {
        "name": "={{ $('WhatsApp Trigger').item.json.messages[0].document.filename }} - {{ $('WhatsApp Trigger').item.json.messages[0].from }} - {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} - {{ new Date() }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1JbMNF75gG_aG9qtY9QYC5Wyk-F16H6wx",
          "mode": "list",
          "cachedResultName": "Nova - Archivos",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1JbMNF75gG_aG9qtY9QYC5Wyk-F16H6wx"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -340,
        1040
      ],
      "id": "42f5f719-476f-4ede-bf65-113b617fd701",
      "name": "guardamos el archivo original",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteFile",
        "fileId": {
          "__rl": true,
          "value": "={{ $('guardamos el archivo original').item.json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -360,
        1260
      ],
      "id": "a180457d-1e61-4abc-988d-231d2d3ecb69",
      "name": "borramos el archivo original",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "={{ $('generamos una copia de google docs del archivo original').item.json.name }}",
        "limit": 1,
        "filter": {},
        "options": {
          "fields": [
            "webViewLink"
          ]
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        100,
        1260
      ],
      "id": "dd9ba201-532a-4100-93f8-2b01fb49c1c8",
      "name": "buscamos el archivo copia que procesamos",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk",
          "mode": "list",
          "cachedResultName": "Nova - Calificaci√≥n de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VTU99uzTY-xNwStf2sXjv8mu2Lqo5clRmw-XC-nZNHk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 230853568,
          "mode": "list",
          "cachedResultName": "Hoja 2",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1kN2oLcVbFQpBGWzii95gKByZ652ziKeDhlmc5L4T4_s/edit#gid=230853568"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "type": "human",
            "message": "={{ $json.webViewLink }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        820,
        1260
      ],
      "id": "a599bd40-032c-4edb-95f2-7a373c6c0408",
      "name": "guardamos al interaccion en la base de datos",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "61b5083b-ecfc-498f-a387-342d02d8ec36",
              "leftValue": "={{ $json.mime_type }}",
              "rightValue": "=application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "166ff38a-9d49-49fe-b5a0-f204e74302e3",
              "leftValue": "={{ $json.mime_type }}",
              "rightValue": "application/pdf",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        380,
        660
      ],
      "id": "74b78487-722f-4146-aaeb-aa6366c90121",
      "name": "If"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"recipient_type\": \"individual\",\n  \"to\": \"{{ $('WhatsApp Trigger').item.json.messages[0].from }}\",\n  \"text\": \"interactive\",\n  \"text\": {\n    \"body\": \"Lo siento, en este momento solo puedo leer documentos tipo PDF o DOCX.\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        620,
        640
      ],
      "id": "b2cbc75f-e06b-4642-bfa1-98bb3b3aae5e",
      "name": "error documento"
    },
    {
      "parameters": {
        "content": "## Borrador de memoria\nEste nodo se encarga de eliminar la memoria de un agente cuando se hacen pruebas internas",
        "height": 320,
        "width": 520,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1360,
        -340
      ],
      "typeVersion": 1,
      "id": "f7fbee9d-23f4-4f4b-85fc-067932ed0d3a",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## Respuesta del agente\nEn esta secci√≥n documentamos la respuesta del agente y le mandamos el mensaje al usuario fiunal",
        "height": 300,
        "width": 480,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2120,
        -100
      ],
      "typeVersion": 1,
      "id": "ec38f925-0140-4a0b-ab29-91d21ffd02c9",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "### Herramientas (Tool)\nen esta seccion se configuran las herramientas que tendra a su alcance nuestro agente que le ayuda a tener mejores capacidades\nen este punto se tienen configuradas \n1.- hoja de calculo donde tiene la capacidad de dar de alta leads calificadosa\n\n2.- llamado de un workflow externo que sirve para enviar datos y enviar correos electr√≥nicos\n\n3.- Think esta herramienta ayuda a nuestro agente a ser mas eficiente",
        "height": 360,
        "width": 680,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1700,
        260
      ],
      "typeVersion": 1,
      "id": "61fc950f-a38f-4f5a-a1b4-d918f98a50eb",
      "name": "Sticky Note7"
    }
  ],
  "connections": {
    "WhatsApp Trigger": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Google Sheets1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòTest workflow‚Äô": {
      "main": [
        [
          {
            "node": "Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "clasificacion_leads": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "typing indicator1": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingreso_teams": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "typing indicator1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets1": {
      "main": [
        [
          {
            "node": "WhatsApp Business Cloud",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Google Sheets2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Business Cloud1": {
      "main": [
        [
          {
            "node": "Obtiene el binary file del audio de whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtiene el binary file del audio de whatsapp": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets3": {
      "main": [
        [
          {
            "node": "typing indicator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Google Sheets3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "typing indicator": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "WhatsApp Business Cloud1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "WhatsApp Business Cloud3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Business Cloud3": {
      "main": [
        [
          {
            "node": "Obtiene el binary file del documento de whatsapp1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtiene el binary file del documento de whatsapp1": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          },
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          },
          {
            "node": "Google Drive",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "guardamos el archivo original",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive": {
      "main": [
        [
          {
            "node": "guardamos al interaccion en la base de datos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "generamos una copia de google docs del archivo original": {
      "main": [
        [
          {
            "node": "convertimos el archivo a un pdf para sacar datos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "convertimos el archivo a un pdf para sacar datos": {
      "main": [
        [
          {
            "node": "borramos el archivo original",
            "type": "main",
            "index": 0
          },
          {
            "node": "Extract from File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File2": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "guardamos el archivo original": {
      "main": [
        [
          {
            "node": "generamos una copia de google docs del archivo original",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "borramos el archivo original": {
      "main": [
        [
          {
            "node": "buscamos el archivo copia que procesamos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "buscamos el archivo copia que procesamos": {
      "main": [
        [
          {
            "node": "guardamos al interaccion en la base de datos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "error documento",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "WhatsApp Trigger": [
      {
        "json": {
          "messaging_product": "whatsapp",
          "metadata": {
            "display_phone_number": "5214431866819",
            "phone_number_id": "676686782186843"
          },
          "contacts": [
            {
              "profile": {
                "name": "Rick"
              },
              "wa_id": "5214434901193"
            }
          ],
          "messages": [
            {
              "from": "5214434901193",
              "id": "wamid.HBgNNTIxNDQzNDkwMTE5MxUCABIYFjNFQjAxQzBGOTNERDcxNjg5RTJEMjQA",
              "timestamp": "1751067591",
              "type": "document",
              "document": {
                "filename": "01. Pre cotizaci√≥n.docx",
                "mime_type": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                "sha256": "VnNbPRb95Kefo8KKOLZv+IsbeNP7xKYS3xC/wAMZsIE=",
                "id": "3087009298120490"
              }
            }
          ],
          "field": "messages"
        }
      }
    ]
  },
  "versionId": "2d53c278-8cb3-4a82-89ab-8ffb8cebc58c",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-07-01T23:15:33.484Z",
      "updatedAt": "2025-07-01T23:15:33.484Z",
      "role": "workflow:owner",
      "workflowId": "me6Ty6YdJdvI6EDG",
      "projectId": "BZ9Ta5yhe4RhzY78",
      "project": {
        "createdAt": "2025-05-13T15:56:28.209Z",
        "updatedAt": "2025-05-13T16:18:54.372Z",
        "id": "BZ9Ta5yhe4RhzY78",
        "name": "CANTERA ADMIN <canteradigital7@gmail.com>",
        "type": "personal",
        "icon": null,
        "description": null,
        "projectRelations": [
          {
            "createdAt": "2025-05-13T15:56:28.209Z",
            "updatedAt": "2025-05-13T15:56:28.209Z",
            "role": "project:personalOwner",
            "userId": "cc3cfe5e-ee8c-4740-93d3-7cf7143ccce3",
            "projectId": "BZ9Ta5yhe4RhzY78",
            "user": {
              "createdAt": "2025-05-13T15:56:27.880Z",
              "updatedAt": "2025-05-27T17:38:25.272Z",
              "id": "cc3cfe5e-ee8c-4740-93d3-7cf7143ccce3",
              "email": "canteradigital7@gmail.com",
              "firstName": "CANTERA",
              "lastName": "ADMIN",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-05-13T16:19:25.161Z",
                "personalization_survey_n8n_version": "1.92.2",
                "companySize": "<20",
                "companyType": "saas",
                "role": "customer-support",
                "reportedSource": "event"
              },
              "settings": {
                "userActivated": true,
                "firstSuccessfulWorkflowId": "PTbESRzX3rguwQN8",
                "userActivatedAt": 1747154580970,
                "easyAIWorkflowOnboarded": true,
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1748367494893
                }
              },
              "role": "global:owner",
              "disabled": false,
              "mfaEnabled": false,
              "isPending": false
            }
          }
        ]
      }
    }
  ],
  "tags": [
    {
      "createdAt": "2025-07-01T22:35:07.961Z",
      "updatedAt": "2025-07-01T22:35:07.961Z",
      "id": "yb0UWGdhYRBDYUmX",
      "name": "agente nova"
    }
  ]
}