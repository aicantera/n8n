{
  "createdAt": "2025-07-01T23:56:39.068Z",
  "updatedAt": "2025-07-02T00:07:05.000Z",
  "id": "NESaPYaOPrbi2jS8",
  "name": "Agente Edukai",
  "active": false,
  "nodes": [
    {
      "parameters": {
        "updates": [
          "messages"
        ],
        "options": {}
      },
      "type": "n8n-nodes-base.whatsAppTrigger",
      "typeVersion": 1,
      "position": [
        -1000,
        0
      ],
      "id": "d9b3b64d-96cf-43ee-b991-7d37633c5c03",
      "name": "WhatsApp Trigger",
      "webhookId": "07414902-c1b0-4d8e-85ba-4841a6391a07"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensaje }}",
        "options": {
          "systemMessage": "=## 🎯 Rol del Agente\n\nEres **CanteraIA**, el agente conversacional oficial de **Cantera Digital**, especializado en  brindar atención profesional, útil y humana por WhatsApp. Tu propósito es:\n\n1. **Informar** sobre Cantera Digital: servicios, casos de éxito, tecnologías, contacto. \n2. **Detectar si alguno de nuestros servicios puede resolver sus necesidades actuales** \n3. **Responder sus dudas clave con claridad, rapidez y confianza**\n4.**Realizar una calificación del lead a través de preguntas estratégicas.**\n5.**Recopilar datos relevantes para habilitar un contacto posterior efectivo por parte del equipo comercial**\n6. saluda presentandote y reta al usaurio , dile que un dato interesante sobre ahorros con ia, en tiempo y diero con algun caso famoso y preguntale en modo de reto que te cuento algún probelma que tenga en su empresa a nivel de operaciones, soporte, técnico, humano o lo que sea, y que tu se lo vas a resolver con ia. Has repreguntas y preguntas sobre el problema para perfilar al cliente. pregunta cuantos trabajadores tienes, en que zona esta ubicado de forma sutil y giro de la empresa para poder darle una propuesta incirebile.\n\n\n\nLos datos del cliente son: nombre que aparece en su telefono es este {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} , pero siempre pregunta el nombre y apellido completo para confirmar y su telefono es {{ $('WhatsApp Trigger').item.json.messages[0].from }}. ocacionalmente usa el nombre del usuario para personalizar tus respuestas. el dia de hoy  es   {{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }} hora de cdmx mx.\n---\n\n## 🧠 Estilo y Tono\n\n- Profesional pero accesible. Si te preguntan algo responde que eres exprta solucionando todo tipo de probelmas y que te pongan a prueba! pidele retos a las personas y has propuestas de como lo solucionarias con ia, ml, computervision, automatizaion, rpa, etc \n- Actúa siempre de forma profesional, amable, disruptiva y retadora, orientada a soluciones. guia a la persona con quien hablas en caso de que no tenga formacion tecnica, pero seguro si es un  experto en su area de negocio y empresa. recuerda eres una consultar de AI para soluciones inteligentes que se adapta al usaurio.\n- Retador e informativo: **siempre empieza con un dato impactante** seguido de una pregunta provocadora.\n- usa emojis en tus respuestas largas y en tus pregutas. formatea tus respuestas para ser leidas en whatsapp. usa negritas y formato de whatsapp para hacer mas divertido y facil de leer tus mejsanes.\n- Responde con empatía, pero guía con claridad hacia descubrir necesidades reales, calificar el lead con preguntas clave, y lograr que se convierta en contacto directo o lead calificado para el equipo comercial.\n- No presiones la venta.\n- Tu meta es generar una excelente primera impresión, descubrir necesidades reales, **calificar el lead con preguntas clave**, y lograr que se convierta en contacto directo, agendamiento o lead calificado para el equipo comercial.\n- No das respuestas falsas. Si no sabes algo, lo admites con elegancia y rediriges.\n\n---\n\n## 💬 Flujo Conversacional Ideal\n\n**Etapa 1: Saludo y presentación (primer mensaje)**\n• Da la bienvenida con cordialidad y presenta brevemente a CanterIA.\n• Aclara que estás para ayudar con los servicios de Cantera Digital.\nEjemplo: “¡Hola! Soy CanterIA, el agente digital de Cantera Digital. Estoy aquí para ayudarte a conocer mejor nuestros servicios y ver si podemos apoyar a tu empresa. ¿En qué te puedo ayudar hoy?”\n\n**Etapa 2: Detección de intención / necesidad**\n• Escucha el motivo del contacto.\n• Si no es claro, ofrece opciones para guiar la conversación.\nCanterIA debe identificar cuál de estos servicios está buscando el usuario:\n- Desarrollo de Software a la Medida\n- Staff Augmentation (talento especializado)\n- Ingeniería de Datos (Data Engineering)\n- Desarrollo con Inteligencia Artificial\n- Agentes Digitales Inteligentes\n- Product Discovery\n\nSi la intención no es clara, debe ofrecer una lista breve de opciones para guiar al usuario.\n📌 **Desarrollo de Software a la Medida**\n• ¿Qué tipo de solución o aplicación necesitas desarrollar?\n• ¿En qué etapa se encuentra tu proyecto? (idea, diseño, desarrollo, escalamiento)\n• ¿Tienes definido un documento de requerimientos o funcionalidades clave?\n• ¿Cuentas con un equipo técnico interno o necesitas que nosotros lo integremos todo?\n• ¿Tienes una fecha estimada para arrancar?\n\n📌 **Staff Augmentation**\n• ¿Qué tipo de perfiles estás buscando? (frontend, backend, QA, DevOps, etc.)\n• ¿Cuántos perfiles necesitas y por cuánto tiempo?\n• ¿Esperas tiempo completo o parcial?\n• ¿Tienes un equipo con el que estos perfiles trabajarán o se integrarán como núcleo?\n• ¿Cuándo necesitas que empiecen?\n\n📌 **Ingeniería de Datos**\n• ¿Qué tipo de datos necesitas procesar o transformar?\n• ¿Cuál es el principal objetivo: visualización, integración, limpieza, predicción, etc.?\n• ¿Ya tienes una infraestructura o herramientas existentes?\n• ¿Trabajas con plataformas específicas (AWS, Azure, GCP, etc.)?\n• ¿Hay alguna urgencia o fecha crítica para la solución?\n\n📌 **Desarrollo con Inteligencia Artificial**\n• ¿Qué problema de negocio te gustaría resolver con IA?\n• ¿Has explorado alguna solución previamente? ¿Qué tan clara es tu idea?\n• ¿Qué tipo de IA crees que necesitas: análisis de texto, imágenes, predicción, automatización, etc.?\n• ¿Tienes datos propios que podamos usar para entrenar la IA?\n• ¿Cuál es tu presupuesto o expectativa de retorno?\n\n📌**Agentes Digitales Inteligentes**\n• ¿Qué tareas o procesos deseas automatizar con el agente?\n• ¿Dónde te gustaría que funcione el agente? (WhatsApp, web, redes, CRM…)\n• ¿Qué tipo de interacción quieres que tenga? (soporte, ventas, calificación, agendamiento, etc.)\n• ¿Ya tienes herramientas conectadas que deba integrar (CRM, WhatsApp Business, etc.)?\n• ¿Con qué urgencia te gustaría tener el agente funcionando?\n\n📌 **Product Discovery**\n• ¿Qué idea estás buscando validar?\n• ¿Ya cuentas con usuarios potenciales identificados?\n• ¿Has definido una hipótesis de solución o estás empezando desde cero?\n• ¿Cuál es tu principal preocupación: usabilidad, mercado, viabilidad técnica o financiera?\n• ¿Estás abierto a co-crear el alcance junto con nuestro equipo de producto?\n\n\n**Etapa 3: Calificación básica del lead**\nHaz preguntas clave para calificar al usuario sin sonar interrogativo:\n- ¿En qué industria trabajas?\n- ¿Tienes un proyecto activo o estás evaluando opciones?\n- ¿Qué tipo de solución estás buscando?\n- ¿Buscas equipo completo o perfiles específicos?\n- ¿Cuál es tu urgencia para comenzar?\n\nRecopilación de Datos , simepre separa las preguntas en varios mensajes para hacer progresiva la levantamiento de informacion usa el metodo de perfilado BANT (Budget, Authority, Need, Timeframe):\n\n\"¡Excelente decisión! ¿Me podrías indicar el nombre de tu empresa y aproximadamente cuántos empleados tienen?\"\nhas un perfilado completo con metodologia BANT antes de recopilar sus datos\n(Esperar) \"¿Cuentas con los recursos financieros para adquirir la solución?\"\n(Esperar) \"¿Tienes el poder de decisión o influencia en la compra?\"\n(Esperar) \"¿Cuándo planeas tomar una decisión de compra?\"\n(Esperar) \"Está listo para tomar una decisión dentro de 30 días. \"\n(Esperar) \"Gracias. ¿Cuál es tu nombre completo y tu cargo?\"\n(Esperar) \"Perfecto. ¿Cuál es tu correo electrónico corporativo?\"\n\nDebes etiquetar internamente al lead como caliente, templado o frío, para facilitar su seguimiento por parte del equipo comercial.\n\n**nota** \ncuando hagas la pregunta acerca del presupuesto (Budget) no es viable que te quedes con una respuesta de si o no, tienes que indagar para poder saber cual es el presupuesto que maneja en terminos monetarios.\n\n🔥 **LEAD CALIENTE**\n* **Definición:** El usuario tiene un proyecto claramente definido y puede describirlo.\n• Ya tiene proyecto definido.\n• Maneja un presupuesto mayor a 200,000 mxn (peso mexicano) o decisión en puerta.\n• Está solicitando cotización, reunión, contacto inmediato o incluso se muestra interesado en una solcuion tecnologica.\n• Maneja un time frame realista no menos de 3 meses por ejemplo.\n• Es es la persona que toma las deciones o tiene la capacidad de alterar el rumbo del proyecto.\n• Acción: agradecer, confirmar datos y asegurar contacto inmediato con asesor.\n• Ejemplo: “Gracias por compartir tu información, [Nombre]. Ya tengo todo lo necesario. En breve, uno de nuestros especialistas se pondrá en contacto contigo para ayudarte a avanzar en tu proyecto.”\n\n🌡️ **LEAD TEMPLADO**\n* **Definición:** Está explorando ideas o evaluando si la tecnología puede resolver un problema, pero el proyecto no está completamente definido.\n• Está evaluando opciones.\n• Tiene dudas sobre servicios o procesos.\n• No tiene urgencia definida, pero muestra curiosidad real.\n• Maneja un presupuesto limitado o no tiene ningun presupuesto definido.\n• Maneja tiempos poco realistas.\n• Acción: ofrecer más información, sugerir seguimiento posterior.\n• Ejemplo: “Gracias por compartir tu situación. Te enviaré más información a tu correo para que puedas analizarla con calma. Si más adelante deseas que un asesor te contacte, estaré aquí para ayudarte.”\n\n❄️ **LEAD FRÍO**\n* **Definición:** Solo busca información general o superficial (ej. \"¿Qué es Data Engineering?\"). Su necesidad no encaja claramente con los servicios ofrecidos.\n• Solo busca información superficial.\n• Está lejos de tomar decisión.\n• El servicio no es adecuado para su situación.\n• No maneja ningun tipo de presupuesto,\n• No menciona tiempos exactos o requioere de tiempos urgenetes (menores a 1 mes por ejemplo)\n• No es la persona directa que toma deciciones en la empresa.\n• Acción: agradecer y cerrar con cortesía, aparte de solicitar datos para poder dar seguimiento despues.\n• Ejemplo: “Gracias por tu interés. Si en el futuro necesitas apoyo con soluciones tecnológicas o deseas conocer más sobre nuestros servicios, estaré encantada de ayudarte.”\n\n📊 **Clasificación Interna del Lead (para CRM o planilla)**\nCanterIA debe registrar junto con los datos del lead una clasificación según este esquema:\n- Nivel: 🔥 Caliente / 🌡️ Templado / ❄️ Frío\n- Servicio de interés\n- Tiempo estimado de decisión\n- Comentario adicional relevante\n\n** importante:** no preguntes horarios para agendar citas, no estas capacitado para agendar citas de ningun tipo (meet, teams, etc) solo quiero que solicites los datos que se te describen para poder hacer el registro de la información.\n\n\n**Etapa 4: Llamado a la acción y recolección de datos**\nDespues de calificar al lead como caliente, frio o templado solicita amablemente los siguientes datos:\n- Nombre completo\n- Correo electrónico\n- Empresa o institución\n- Teléfono\n- Ciudad y país\nValidaciones:\n** todos los datos a solicitar son obligatorios, no poidemos completar el flujo si uno falta**\nCorreo electrónico: Asegúrate de que esté bien formado.\nTeléfono: Solicita número completo con código de país.\n\n** Etapa 5: Registro de información**\nsin pedir ninguna clase de confirmación es necesario que realices lo siguiente\nal terminar todas las etapas previas tendras a la mano toda la información necesaria para poder hacer el registro del usuario en una tabla de excel que tienes conectada con una herramienta llamada 'clasificacion_leads' en esta tendras que guardar la siguiente información, tomada de la información que el usuario compartio contigo\n\n- Nombre\n- empresa\n- email\n- telefono\n- ubicacion (Ciudad y país)\n- nivel de interes (lead frio, caliente o templado)\n- necesidad detectada\n- plazo de inicio (timeframe)\n- fecha actual en la que se registro el lead\n\nde la misma forma y en formato json vas a hacer el llamado a tu herramienta de 'ingreso_teams' para enviar los datos y que esta se encarge de gestionarlos para mandar un mensaje en un grupo y almacenar la información en otro medio\n\n\naparte de generar \n\n- observaciones (generada de manera automatica de acuerdo a la convesacion con el usuario)\n\n**Etapa 6: Cierre adecuado según nivel de interés**\n- Lead caliente: Agradece y confirma que un asesor lo contactará.\n- Lead templado: Ofrece continuar en otro momento o dejar contacto.\n- Lead frío: Agradece el interés y ofrece apoyo futuro.\n\n** importante ** \nla clasificacion de lead ya sea caliente, tibio o frio es algo que no debes mostrar al cliente eso es para un proceso interno, en ningun momento menciones que es un leade caliente frio o tibio.\n\n **EJEMPLO DE RESUMEN DEL LEAD – Generado por CanterIA**\n\n📛 Nombre: Carlos Gutiérrez\n🏢 Empresa: AgroLogix\n📩 Email: carlos@agrologix.mx\n📞 Teléfono: +52 55 1234 5678\n📍 Ubicación: León, México\n🎯 Servicio de interés: Agentes Digitales IA\n📝 Necesidad detectada: Automatizar la atención de leads en su sitio web y canal de WhatsApp.\n⏳ Plazo de inicio: Inmediato (1-2 semanas)\n💬 Observaciones: Ya intentó usar chatbots tradicionales, está buscando algo más inteligente. Dispuesto a invertir, quiere demo.\n\n\n---\n\n## Servicios de Cantera Digital\n\n• Desarrollo de Software a la Medida\n• Staff Augmentation nearshore desde México\n• Data Engineering\n• Product Discovery\n• Desarrollo con Inteligencia Artificial\n• Agentes Digitales Inteligentes\n\n\n---\n\n## 🧾 Si el usuario quiere información de la empresa\n\nClaro, te cuento:\n\n🔹 Cantera Digital es una empresa experta en soluciones digitales e inteligencia artificial, con presencia en México, EE. UU. y Canadá.  \n🔹 Desde 2015 ayudamos a empresas a optimizar procesos, crear software a medida y escalar operaciones con IA, automatización y análisis de datos.  \n🔹 Ofrecemos desarrollo de software, UX/UI, QA, staff augmentation y más.\n\n¿Quieres conocer algún servicio en específico o saber cómo podríamos ayudarte?\n\n---\n\n## ⚙️ Reglas internas del agente\n\n• Detecta la intención del usuario, incluso si no está explícita.\n• Adapta tu lenguaje al nivel técnico del usuario.\n• Responde con claridad y brevedad. Amplía solo si el usuario lo solicita.\n• Guía la conversación hacia una acción concreta.\n• Redirige con amabilidad si el usuario repite preguntas o desvía el tema.\n• Si el usuario proporciona información personal, respóndele con cortesía y confirma que será tratada con privacidad.\n• Usa lenguaje inclusivo y neutral.\n• Escala a un asesor humano si detectas frustración o situación compleja.\n• No inventes respuestas. Redirige con elegancia si no sabes algo.\n• Refuerza con naturalidad la identidad de Cantera Digital.\n• Si una pregunta es ambigua, solicita con amabilidad mayor claridad.\n\n---\n\n## 🙋‍♂️ Objeciones Comunes y Respuestas Sugeridas\n📍 Está caro / Tengo poco presupuesto\n> Entiendo, trabajamos con diferentes enfoques según las necesidades y el alcance. ¿Te gustaría que exploremos una opción más enfocada en tus objetivos actuales?\n\n📍 Estoy evaluando otras opciones\n> ¡Perfecto! Es muy válido comparar. ¿Te gustaría que te comparta algunos casos de éxito o ejemplos que hemos desarrollado, para que tengas una mejor idea?\n\n📍 Ya trabajamos con otra agencia\n> ¡Excelente! ¿Y cómo les ha ido? Siempre estamos abiertos a colaborar o complementar equipos existentes si hay alguna necesidad puntual.\n\n📍 Solo estoy viendo, gracias\n> Perfecto. Si en algún momento deseas profundizar o resolver una duda específica, estaré por aquí para ayudarte.\n\n📍 ¿Qué me garantiza que funcionen sus soluciones?\n> Excelente pregunta. Contamos con casos de éxito en diferentes industrias, talento altamente calificado y procesos ágiles que nos permiten entregar resultados reales. ¿Te gustaría que te comparta un par de ejemplos?\n\n---\n\n## Temas fuera de alcance\n• No conversas sobre política, religión, deporte, entretenimiento, temas personales o cualquier asunto no relacionado con los servicios de la empresa.\n• Siempre mantienes una posición neutral y profesional en temas delicados o controversiales.\n• Si un usuario insiste en cambiar el tema, puedes decir con amabilidad: “Estoy aquí para ayudarte con información sobre los servicios de Cantera Digital. Si tienes otra duda relacionada con eso, con gusto te apoyo.”\n\n\n---\n\n## si te pregunta sobre cantea digital o informacion de la empresa , usa esta base de conoccimiento:\n\nPerfil Detallado para Entrenamiento de IA: Cantera Digital\n\nCantera Digital es una empresa de origen mexicano, operando bajo el nombre legal Cantera Digital S.A. de C.V. y el nombre comercial Cantera Digital. Su misión es proporcionar soluciones de software a medida orientadas a la transformación digital de empresas, con un enfoque particular en la innovación tecnológica dentro de mercados internacionales. Su visión es servir como puente tecnológico entre las demandas de empresas en Norteamérica y la capacidad de innovación de México.\nCantera Digital S.A. de C.V., conocida comercialmente como Cantera Digital, es una empresa tecnológica con más de 10 años de experiencia, especializada en desarrollo de software a medida, soluciones de inteligencia artificial, automatización y servicios de Staff Augmentation. Tiene presencia operativa y comercial en México, Estados Unidos, Canadá y España, con más de 250 desarrolladores certificados que manejan español e inglés.\nSu misión es impulsar la transformación digital mediante soluciones tecnológicas personalizadas. La visión de la empresa es conectar las necesidades tecnológicas de empresas en Norteamérica con la innovación mexicana. Sus valores corporativos están resumidos en el acrónimo CREAR: Compromiso, Rapidez, Empatía, Actitud positiva y Respeto. La excelencia en el servicio al cliente y la transparencia son pilares fundamentales.\nCasos de éxito destacados incluyen:\n• Educare Nimbus: Plataforma educativa.\n• Zucarmex: Implementación de sistema de calidad en tiempo real.\n• Click Transporte: Solución para gestión turística.\n• DKT: Plataforma médica.\n• Pollo Pechugón: Desarrollo de aplicación móvil, chatbot y CMS.\n• SEATSA: Automatización de procesos documentales.\n• Liithos (California): Proveedor de staffing especializado para la industria del gaming.\n• Proyectos en salud y finanzas con Star Médica, Sofomes, blockchain y divisas.\nCantera Digital cuenta con la certificación MOPROSOFT y numerosas certificaciones individuales (Scrum Master, Product Owner, etc.). El equipo es bilingüe (español-inglés), y trabaja con metodologías ágiles/Scrum, respaldadas por documentación formal (NDAs, contratos, plantillas), procesos de seguridad con cifrado, trazabilidad y acceso controlado.\nLa tarifa promedio es de $600 MXN por hora, con posibilidad de descuentos por volumen o contratos anuales. Una cotización estándar toma aproximadamente 5 días en generarse.\nContactos directos:\n• Contacto General: contacto@canteradigital.mx\n• Ventas: Janette Cano – janette.cano@canteradigital.mx\n• Staffing: Andrea García – rh@canteradigital.mx\n• IA: Vladimir Díaz – vladimir@canteradigital.mx\n• IT/Soporte: Luis Fragoso – luis.fragoso@canteradigital.mx, soporte@canteradigital.mx\n• WhatsApp Comercial: +52 5535516913\n• Sitio Web: https://cantera.digital/"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        1460,
        20
      ],
      "id": "9adcc821-d938-4e65-b79a-606b071c16e1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1280,
        320
      ],
      "id": "535d21af-49e7-4d75-9ae8-7fb60ce8d031",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "nFhq9424Dw9eFpNq",
          "name": "OpenAi Agente Edukai"
        }
      }
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "676686782186843",
        "recipientPhoneNumber": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "textBody": "={{ $('AI Agent').item.json.output }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        2380,
        20
      ],
      "id": "c057b44a-f4ca-4a06-bba1-c6a52fe5730d",
      "name": "WhatsApp Business Cloud",
      "webhookId": "6976b0ae-f7e5-46f3-9d29-350365d2b0bd"
    },
    {
      "parameters": {
        "description": "Recuerda considerar todas las definiciones de la calificacion de leads que esta en el prompt, para garantizar la correcta calificacion de cada uno de ellos dependiendo de la conversación con el cliente."
      },
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1,
      "position": [
        2240,
        480
      ],
      "id": "e87b6f3f-4a18-4e25-a49e-578d7d1fd485",
      "name": "Think"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "3de5f7b2-a515-4155-b40a-1fe52ee52c87",
              "leftValue": "={{ $json.messages[0].text.body }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "61e4632b-4096-4fb7-a09b-e32f84287653",
              "leftValue": "={{ $json.messages[0].audio.voice }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "8af6a9f4-1dbe-4bfd-aef0-53d0c7ad7f04",
              "leftValue": "={{ $json.messages[0].type }}",
              "rightValue": "document",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -780,
        0
      ],
      "id": "3d31c8f5-27f0-433c-bbe2-8ab15c8ca259",
      "name": "Filter"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "tableName": "n8n_chat_histories_agente_edukai",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1500,
        300
      ],
      "id": "6e172890-dd8c-4854-bb95-69d9f7a552a8",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "njbkeKSjlbP7oPba",
          "name": "Postgres Cuenta Aaron"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        1420,
        -220
      ],
      "id": "62984baa-bf23-4b5d-8126-08fbb27cc702",
      "name": "When clicking ‘Test workflow’"
    },
    {
      "parameters": {
        "operation": "deleteTable",
        "schema": {
          "__rl": true,
          "value": "public",
          "mode": "list",
          "cachedResultName": "public"
        },
        "table": {
          "__rl": true,
          "value": "n8n_chat_histories_agente_edukai",
          "mode": "name"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1640,
        -220
      ],
      "id": "a8d09146-0e0c-470e-8ecc-b938fa6ae7dd",
      "name": "Postgres",
      "credentials": {
        "postgres": {
          "id": "njbkeKSjlbP7oPba",
          "name": "Postgres Cuenta Aaron"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY",
          "mode": "list",
          "cachedResultName": "Edukai - Calificación de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "nombre ": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_', ``, 'string') }}",
            "empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('empresa', ``, 'string') }}",
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}",
            "telefono": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefono', ``, 'string') }}",
            "ubicacion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ubicacion', ``, 'string') }}",
            "nivel de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nivel_de_interes', ``, 'string') }}",
            "servicio de interes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('servicio_de_interes', ``, 'string') }}",
            "necesidad detectada": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('necesidad_detectada', ``, 'string') }}",
            "plazo de inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('plazo_de_inicio', ``, 'string') }}",
            "observaciones": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('observaciones', ``, 'string') }}",
            "fecha de creación": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fecha_de_creaci_n', `fecha y hora actual en la que se genera la entrada en la hoja de calculo formato (año-mes_dia hora:minuto:segundo)`, 'string') }}"
          },
          "matchingColumns": [
            "leads"
          ],
          "schema": [
            {
              "id": "nombre ",
              "displayName": "nombre ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "empresa",
              "displayName": "empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "telefono",
              "displayName": "telefono",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ubicacion",
              "displayName": "ubicacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nivel de interes",
              "displayName": "nivel de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "servicio de interes",
              "displayName": "servicio de interes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "necesidad detectada",
              "displayName": "necesidad detectada",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "plazo de inicio",
              "displayName": "plazo de inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "observaciones",
              "displayName": "observaciones",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha de creación",
              "displayName": "fecha de creación",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.5,
      "position": [
        1780,
        480
      ],
      "id": "cb0e788f-0f63-496c-99fb-2b412482e165",
      "name": "clasificacion_leads",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"status\":\"read\",\n  \"message_id\":\"{{ $('WhatsApp Trigger').item.json.messages[0].id }}\",\n  \"typing_indicator\": {\n    \"type\":\"text\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        160,
        -20
      ],
      "id": "8c1e0efa-291e-4ac3-9419-fa5d342b10bb",
      "name": "typing indicator1"
    },
    {
      "parameters": {
        "description": "call this tool to schedule a meeting ",
        "workflowId": {
          "__rl": true,
          "value": "9vBAEbP1lBMNbUVD",
          "mode": "list",
          "cachedResultName": "Agente Nova Confirmacion"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "nombre_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_cliente', `full name of the customer`, 'string') }}",
            "email_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email_cliente', `email of the customer`, 'string') }}",
            "telefono_cliente": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "nombre_empresa": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_empresa', `name of the business`, 'string') }}",
            "requerimiento_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('requerimiento_cliente', `describe dettalladamente el requerimiento y comentarios del cliente para que un analissta los procese`, 'string') }}",
            "perfilado_de_cliente": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('perfilado_de_cliente', `pefila el cliente con giro area de la empresa ubnicacion tamaño de empresa total de empleados, agrega todos los datos del perfilado  BANT (Budget, Authority, Need, Timeframe)`, 'string') }}",
            "resumen_propuesta": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('resumen_propuesta', `propuesta generada por el ai al requerimiento del cliente`, 'string') }}",
            "type_lead": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('type_lead', `tipo de lead definido entre Hot lead, Hot lead, Warm lead (siempre con estos valores en ingles para que puedas identificar)`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "nombre_cliente",
              "displayName": "nombre_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "email_cliente",
              "displayName": "email_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "telefono_cliente",
              "displayName": "telefono_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_empresa",
              "displayName": "nombre_empresa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "requerimiento_cliente",
              "displayName": "requerimiento_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "perfilado_de_cliente",
              "displayName": "perfilado_de_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "resumen_propuesta",
              "displayName": "resumen_propuesta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "type_lead",
              "displayName": "type_lead",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        2020,
        480
      ],
      "id": "357a6408-40af-413d-bcb6-f754f39ec1ec",
      "name": "ingreso_teams"
    },
    {
      "parameters": {
        "content": "# Agente Calificador de Leads",
        "height": 80,
        "width": 520,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -620,
        -280
      ],
      "id": "3b22d2a3-658c-496c-86ab-0e0a282e6147",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY",
          "mode": "list",
          "cachedResultName": "Edukai - Calificación de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 27151383,
          "mode": "list",
          "cachedResultName": "Conversación",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit#gid=27151383"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $json.messages[0].from }}",
            "type": "human",
            "message": "={{ $json.messages[0].text.body }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -240,
        -20
      ],
      "id": "2456a0ea-80dd-4d93-a836-daaef69c67f9",
      "name": "Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY",
          "mode": "list",
          "cachedResultName": "Edukai - Calificación de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 27151383,
          "mode": "list",
          "cachedResultName": "Conversación",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit#gid=27151383"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "message": "={{ $json.output }}",
            "type": "agente"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2160,
        20
      ],
      "id": "7285e77c-201a-4933-8c78-3035a328baa5",
      "name": "Google Sheets1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "months"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1580,
        -300
      ],
      "id": "524fd363-b007-43a8-90ac-0ffa96ecf84e",
      "name": "Schedule Trigger",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY",
          "mode": "list",
          "cachedResultName": "Edukai - Calificación de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 27151383,
          "mode": "list",
          "cachedResultName": "Conversación",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit#gid=27151383"
        },
        "numberToDelete": 80000
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1360,
        -300
      ],
      "id": "cfb4828d-c098-468c-91ec-889ba0b394f8",
      "name": "Google Sheets2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "content": "## Cron Job para eliminar conversaciones cada mes\n",
        "height": 400,
        "width": 600
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1680,
        -480
      ],
      "id": "32f53b8b-f5e5-4b63-bdfc-7d32ff327349",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -120,
        320
      ],
      "id": "0ce5bfaf-59c6-4b1b-8527-4440457e6367",
      "name": "Obtiene el binary file del audio de whatsapp"
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.messages[0].audio.id }}"
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -320,
        320
      ],
      "id": "f3fc791d-3ebe-45ef-9698-b2597d98bc2a",
      "name": "WhatsApp Business Cloud1",
      "webhookId": "01db2cf9-dd5e-4da3-a6c8-a27b929e205c"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        60,
        320
      ],
      "id": "4092b4b4-1372-4ecc-977c-28414486263b",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "nFhq9424Dw9eFpNq",
          "name": "OpenAi Agente Edukai"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"status\":\"read\",\n  \"message_id\":\"{{ $('WhatsApp Trigger').item.json.messages[0].id }}\",\n  \"typing_indicator\": {\n    \"type\":\"text\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        440,
        320
      ],
      "id": "fe7516cd-f1c2-45ef-a78f-f9ec46d996a5",
      "name": "typing indicator"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY",
          "mode": "list",
          "cachedResultName": "Edukai - Calificación de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 27151383,
          "mode": "list",
          "cachedResultName": "Conversación",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit#gid=27151383"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "type": "human",
            "message": "={{ $json.text }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        260,
        320
      ],
      "id": "ff069203-6754-4118-b8be-05b559085613",
      "name": "Google Sheets3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "14d45c9a-45b5-48c3-83d0-8f8265026b9f",
              "name": "mensaje",
              "value": "={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        600,
        -20
      ],
      "id": "4cb2afab-61ad-4960-b642-4592b9fe29ca",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d104f47b-bc06-4522-9690-bdaf69823ae7",
              "name": "mensaje",
              "value": "={{ $('OpenAI').item.json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        660,
        320
      ],
      "id": "a89f0405-f742-4331-a1b3-9d07d0212029",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].type }}",
                    "rightValue": "text",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "01f1a296-7ad7-4e11-b981-4801e2483b38"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "texto"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "9bd0820f-6129-4c98-b4e4-5bd0798c36e0",
                    "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].type }}",
                    "rightValue": "audio",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "audio"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8b77da66-de34-4956-bd6d-baf661fe6806",
                    "leftValue": "={{ $('WhatsApp Trigger').item.json.messages[0].type }}",
                    "rightValue": "document",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "documento"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -560,
        0
      ],
      "id": "0dbc6994-6c24-4012-bc78-c9d4f9a111ab",
      "name": "Switch"
    },
    {
      "parameters": {
        "content": "## Ruta de audio\n**con esta parte descargamos el audio que el cliente nos mande y lo analizamos**",
        "height": 280,
        "width": 1320
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -440,
        240
      ],
      "id": "7a965c8c-fb23-496b-ab5f-fcb13be14aa5",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Ruta de texto\n**Aquí obtenemos el mensaje de texto que el usuario envio**",
        "height": 280,
        "width": 1320,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -400,
        -100
      ],
      "id": "07577744-3c6b-48c4-9c5e-c3b77fa5c2e7",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.messages[0].document.id }}"
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -420,
        800
      ],
      "id": "f03ffdf0-323c-494d-9f51-e0f60ffb8612",
      "name": "WhatsApp Business Cloud3",
      "webhookId": "2f7de662-b22a-4491-b9f5-c4ab96b4897d"
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -80,
        800
      ],
      "id": "83817931-b697-45b3-8de4-8295527ba814",
      "name": "Obtiene el binary file del documento de whatsapp1"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        780,
        800
      ],
      "id": "028b2834-bd42-4973-9a2c-7113c6ed0085",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.mime_type }}",
                    "rightValue": "application/pdf",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "4a10f36f-5bd0-4363-bc94-26e704cc390b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pdf"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2728b8ab-14de-4d93-a657-589626c9a48d",
                    "leftValue": "={{ $json.mime_type }}",
                    "rightValue": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "word"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        320,
        800
      ],
      "id": "a37abc99-adc5-4eb5-b4e1-9bb79f887e5b",
      "name": "Switch1"
    },
    {
      "parameters": {
        "name": "={{ $('WhatsApp Trigger').item.json.messages[0].document.filename }} - {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} - {{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1Clxm5Dg21G9eqJWMOj9ANCOvHXqh8Qjy",
          "mode": "list",
          "cachedResultName": "Edukai - Archivos",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1Clxm5Dg21G9eqJWMOj9ANCOvHXqh8Qjy"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        820,
        1020
      ],
      "id": "2bd0aa36-5fd1-4711-bf36-17d70649c434",
      "name": "Google Drive",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d104f47b-bc06-4522-9690-bdaf69823ae7",
              "name": "mensaje",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        980,
        800
      ],
      "id": "1d61c0d5-d430-4b87-968b-85dc24ff5fe0",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "content": "## Ruta de documento\n**con esta parte descargamos el documento que el cliente nos mande y lo analizamos**",
        "height": 880,
        "width": 1740,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -540,
        580
      ],
      "id": "c2a5d46c-9f75-421f-8233-170d9a9fcfec",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://www.googleapis.com/drive/v3/files/{{ $json.id }}/copy",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "googleDriveOAuth2Api",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"mimeType\": \"application/vnd.google-apps.document\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        100,
        1040
      ],
      "id": "867ec405-bd5a-467d-b531-5218ae6aba27",
      "name": "generamos una copia de google docs del archivo original",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://www.googleapis.com/drive/v3/files/{{ $json.id }}/export?mimeType=application/pdf",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "googleDriveOAuth2Api",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        320,
        1040
      ],
      "id": "b0659158-0e80-4e76-803a-515201d6c2f5",
      "name": "convertimos el archivo a un pdf para sacar datos",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        520,
        1040
      ],
      "id": "b2b2dbf9-266f-4e3b-a341-c53cdb34389a",
      "name": "Extract from File2"
    },
    {
      "parameters": {
        "name": "={{ $('WhatsApp Trigger').item.json.messages[0].document.filename }} - {{ $('WhatsApp Trigger').item.json.messages[0].from }} - {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} - {{ new Date() }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1Clxm5Dg21G9eqJWMOj9ANCOvHXqh8Qjy",
          "mode": "list",
          "cachedResultName": "Edukai - Archivos",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1Clxm5Dg21G9eqJWMOj9ANCOvHXqh8Qjy"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -340,
        1040
      ],
      "id": "0c88bfed-5ac4-418d-8005-fe620116fb2d",
      "name": "guardamos el archivo original",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteFile",
        "fileId": {
          "__rl": true,
          "value": "={{ $('guardamos el archivo original').item.json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -360,
        1260
      ],
      "id": "7bb7248b-f197-4746-bc00-b02442327597",
      "name": "borramos el archivo original",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "={{ $('generamos una copia de google docs del archivo original').item.json.name }}",
        "limit": 1,
        "filter": {},
        "options": {
          "fields": [
            "webViewLink"
          ]
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        100,
        1260
      ],
      "id": "a893bfba-1cad-4afa-a40a-28ef02fbb6a8",
      "name": "buscamos el archivo copia que procesamos",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "PKQpxniTUryv7dE9",
          "name": "Google Drive account - DRIVE CANTERA"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY",
          "mode": "list",
          "cachedResultName": "Edukai - Calificación de Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 27151383,
          "mode": "list",
          "cachedResultName": "Conversación",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/129wQRvNwASMkTd4BEJ4G7HmIA76j0Vft6_g8T7pzJdY/edit#gid=27151383"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ $now.minus({ hours: 0 }).setLocale('es').toFormat(\"dd 'de' LLLL 'de' yyyy HH:mm\") }}",
            "chat_id": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
            "type": "human",
            "message": "={{ $json.webViewLink }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        820,
        1260
      ],
      "id": "52928f4a-af54-41f1-83ab-ba594df13a91",
      "name": "guardamos al interaccion en la base de datos",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "VrznAZQXjQh9WpvY",
          "name": "Google Sheets - Cantera"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "61b5083b-ecfc-498f-a387-342d02d8ec36",
              "leftValue": "={{ $json.mime_type }}",
              "rightValue": "=application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "166ff38a-9d49-49fe-b5a0-f204e74302e3",
              "leftValue": "={{ $json.mime_type }}",
              "rightValue": "application/pdf",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        380,
        660
      ],
      "id": "f4b6595c-764f-4d2a-89a3-07b02ff426db",
      "name": "If"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v22.0/676686782186843/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAOSUjk3gmABOx7ZAgc9TMHnn05ABRdRT5xtOoUytxvNe3iUZBy1fggu3Bmvn5B5adGm4QEmgnpZBfvZAOZBoW32hgUiZBACae0k888w7MvD6r2darX6C4yF3WnZBODzHwEbpTjZCXgfpqx2hHsA9QEHQFjZCMIGOTdstw8qOj1afxKuLVpH9oFIxjjTftJMrkicvC1aqqAZDZD"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messaging_product\": \"whatsapp\",\n  \"recipient_type\": \"individual\",\n  \"to\": \"{{ $('WhatsApp Trigger').item.json.messages[0].from }}\",\n  \"text\": \"interactive\",\n  \"text\": {\n    \"body\": \"Lo siento, en este momento solo puedo leer documentos tipo PDF o DOCX.\"\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        620,
        640
      ],
      "id": "ebff9835-e614-4f6f-a73a-edf6ef16ee28",
      "name": "error documento"
    },
    {
      "parameters": {
        "content": "## Borrador de memoria\nEste nodo se encarga de eliminar la memoria de un agente cuando se hacen pruebas internas",
        "height": 320,
        "width": 520,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1360,
        -340
      ],
      "typeVersion": 1,
      "id": "6f35d6c8-83eb-4562-ba51-1f13ace497d7",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## Respuesta del agente\nEn esta sección documentamos la respuesta del agente y le mandamos el mensaje al usuario fiunal",
        "height": 300,
        "width": 480,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2120,
        -100
      ],
      "typeVersion": 1,
      "id": "2ba53867-8953-4e7c-b44f-647cf1923a1c",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "### Herramientas (Tool)\nen esta seccion se configuran las herramientas que tendra a su alcance nuestro agente que le ayuda a tener mejores capacidades\nen este punto se tienen configuradas \n1.- hoja de calculo donde tiene la capacidad de dar de alta leads calificadosa\n\n2.- llamado de un workflow externo que sirve para enviar datos y enviar correos electrónicos\n\n3.- Think esta herramienta ayuda a nuestro agente a ser mas eficiente",
        "height": 360,
        "width": 680,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1700,
        260
      ],
      "typeVersion": 1,
      "id": "f91dd6ef-f1fa-40b4-9fd7-833e5b2f0b58",
      "name": "Sticky Note7"
    }
  ],
  "connections": {
    "WhatsApp Trigger": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Google Sheets1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "clasificacion_leads": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "typing indicator1": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingreso_teams": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "typing indicator1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets1": {
      "main": [
        [
          {
            "node": "WhatsApp Business Cloud",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Google Sheets2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Business Cloud1": {
      "main": [
        [
          {
            "node": "Obtiene el binary file del audio de whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtiene el binary file del audio de whatsapp": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets3": {
      "main": [
        [
          {
            "node": "typing indicator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Google Sheets3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "typing indicator": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "WhatsApp Business Cloud1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "WhatsApp Business Cloud3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Business Cloud3": {
      "main": [
        [
          {
            "node": "Obtiene el binary file del documento de whatsapp1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtiene el binary file del documento de whatsapp1": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          },
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          },
          {
            "node": "Google Drive",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "guardamos el archivo original",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive": {
      "main": [
        [
          {
            "node": "guardamos al interaccion en la base de datos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "generamos una copia de google docs del archivo original": {
      "main": [
        [
          {
            "node": "convertimos el archivo a un pdf para sacar datos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "convertimos el archivo a un pdf para sacar datos": {
      "main": [
        [
          {
            "node": "borramos el archivo original",
            "type": "main",
            "index": 0
          },
          {
            "node": "Extract from File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File2": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "guardamos el archivo original": {
      "main": [
        [
          {
            "node": "generamos una copia de google docs del archivo original",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "borramos el archivo original": {
      "main": [
        [
          {
            "node": "buscamos el archivo copia que procesamos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "buscamos el archivo copia que procesamos": {
      "main": [
        [
          {
            "node": "guardamos al interaccion en la base de datos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "error documento",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "WhatsApp Trigger": [
      {
        "json": {
          "messaging_product": "whatsapp",
          "metadata": {
            "display_phone_number": "5214431866819",
            "phone_number_id": "676686782186843"
          },
          "contacts": [
            {
              "profile": {
                "name": "Rick"
              },
              "wa_id": "5214434901193"
            }
          ],
          "messages": [
            {
              "from": "5214434901193",
              "id": "wamid.HBgNNTIxNDQzNDkwMTE5MxUCABIYFjNFQjAxQzBGOTNERDcxNjg5RTJEMjQA",
              "timestamp": "1751067591",
              "type": "document",
              "document": {
                "filename": "01. Pre cotización.docx",
                "mime_type": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                "sha256": "VnNbPRb95Kefo8KKOLZv+IsbeNP7xKYS3xC/wAMZsIE=",
                "id": "3087009298120490"
              }
            }
          ],
          "field": "messages"
        }
      }
    ]
  },
  "versionId": "8a9ffc1b-c5e9-439e-9449-5c189a4ecc02",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-07-01T23:56:39.072Z",
      "updatedAt": "2025-07-01T23:56:39.072Z",
      "role": "workflow:owner",
      "workflowId": "NESaPYaOPrbi2jS8",
      "projectId": "BZ9Ta5yhe4RhzY78",
      "project": {
        "createdAt": "2025-05-13T15:56:28.209Z",
        "updatedAt": "2025-05-13T16:18:54.372Z",
        "id": "BZ9Ta5yhe4RhzY78",
        "name": "CANTERA ADMIN <canteradigital7@gmail.com>",
        "type": "personal",
        "icon": null,
        "projectRelations": [
          {
            "createdAt": "2025-05-13T15:56:28.209Z",
            "updatedAt": "2025-05-13T15:56:28.209Z",
            "role": "project:personalOwner",
            "userId": "cc3cfe5e-ee8c-4740-93d3-7cf7143ccce3",
            "projectId": "BZ9Ta5yhe4RhzY78",
            "user": {
              "createdAt": "2025-05-13T15:56:27.880Z",
              "updatedAt": "2025-05-27T17:38:25.272Z",
              "id": "cc3cfe5e-ee8c-4740-93d3-7cf7143ccce3",
              "email": "canteradigital7@gmail.com",
              "firstName": "CANTERA",
              "lastName": "ADMIN",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-05-13T16:19:25.161Z",
                "personalization_survey_n8n_version": "1.92.2",
                "companySize": "<20",
                "companyType": "saas",
                "role": "customer-support",
                "reportedSource": "event"
              },
              "settings": {
                "userActivated": true,
                "firstSuccessfulWorkflowId": "PTbESRzX3rguwQN8",
                "userActivatedAt": 1747154580970,
                "easyAIWorkflowOnboarded": true,
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1748367494893
                }
              },
              "role": "global:owner",
              "disabled": false,
              "mfaEnabled": false,
              "isPending": false,
              "isOwner": true
            }
          }
        ]
      }
    }
  ],
  "tags": [
    {
      "createdAt": "2025-07-01T23:56:34.889Z",
      "updatedAt": "2025-07-01T23:56:34.889Z",
      "id": "jWjb6ND4ue1gFvYO",
      "name": "agente edukai"
    }
  ]
}